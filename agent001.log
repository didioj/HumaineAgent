
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14007
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14007/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.39}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.55}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.51}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.35}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.31}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.44}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.32}}}, 'name': 'Watson'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.39}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.55}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.51}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.35}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.31}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.44}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.32}}}, 'name': 'Watson'}}
127.0.0.1 - - [26/Oct/2020 19:53:02] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T23:53:07.071Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 19:53:07] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 297.518900390625
Info received: {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9345542907714843}], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9345542907714843}], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.9345542907714843}], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}, 'addressee': '', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.9345542907714843}], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}, 'addressee': '', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.9345542907714843}], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}, 'addressee': '', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.9345542907714843}]
entities:  [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}]
Found entities: []
entered extractPrice
entities given: []
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
entered extractAddressee
Received entities: [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}]
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756390.9944463}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756390.9944463}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756390.9944463}}]}
Human's history: [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756390.9944463}}]
Most recent human history: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756390.9944463}}
No change to bidHistory. Going to make offer
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756390.9944463}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756390.9944463}}
BidBlock['type']: BuyRequest
Recent offers: []
Last price: None
Remaining time: 293.07984155273436
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.39}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.55}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.51}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.35}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.31}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.44}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.32}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756390.9944463}}
no currency units provided
Returning utility: -0.35
Utility received: -0.35
Buyer did not propose price or other agent made an offer. Going to generate price
No history of any SellOffers. Going to propose price
Going to markup price by 2.473200795665448
Entering quantize
Received quantity: 0.5156202784829068
Received decimals: 2
Returning value: 0.52
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.52 USD.
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Entering receiveMessage
Remaining Time: 293.0196669921875
Info received: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.52 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Entering receiveMessage
Remaining Time: 292.99748754882813
Info received: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.49 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8522926807403566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8522926807403566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8522926807403566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}, 'addressee': 'Human', 'speaker': 'Watson'}
Received input_: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8522926807403566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}, 'addressee': 'Human', 'speaker': 'Watson'}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}, 'addressee': 'Human', 'speaker': 'Celia'}
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8522926807403566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8522926807403566}]
entered interpretMessage
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}]
intents:  [{'intent': 'Offer', 'confidence': 0.8477288722991945}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}, 'index': 3}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}]
entered extractOfferFromEntities
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}, 'index': 3}]
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}]
Returning price: {'value': 0.52, 'unit': 'USD'}
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}, 'index': 3}]
Received price: {'value': 0.52, 'unit': 'USD'}
entered extractPrice
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}}
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}, 'index': 3}]
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.7830293}}
Returning price: {'value': 0.49, 'unit': 'USD'}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.7830293}}
Received price: {'value': 0.49, 'unit': 'USD'}
Received own message
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}}
Adding message to bidHistory
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.7930398}}
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756390.9944463}}, {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.7830293}}]}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.7930398}}
Bid message from processMessage: None
Message from another seller. Need to make an offer!
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.7830293}}
127.0.0.1 - - [26/Oct/2020 19:53:14] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.7930398}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756390.9944463}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.7830293}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.7930398}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.7830293}}, {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.7930398}}]
Last price: 0.49
Remaining time: 290.2745595703125
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.39}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.55}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.51}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.35}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.31}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.44}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.32}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.7930398}}
Currency units match
Returning utility: -0.35
Utility received: -0.35
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.7830293}}]
We've made a SellOffer before!
myLastPrice: 0.52
Our offer was worse. Reached minMarkupRatio so going to match or repeat our last offer
Returning bid: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}
Received confirm: False
bid is a minMarkup
min offer was made by other agent
Going to match other agent's offer
Returning response: I will also offer you 1 milk for 0.49 USD. Our products are organic and Non-GMO.
Returning bidResponse: {'text': 'I will also offer you 1 milk for 0.49 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396830.8257, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}}
Bid message from processMessage: {'text': 'I will also offer you 1 milk for 0.49 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396830.8257, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}}
Sending message: {'text': 'I will also offer you 1 milk for 0.49 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396830.8257, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}}
Sending message to orchestrator: {'text': 'I will also offer you 1 milk for 0.49 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396830.8257, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}}
Entering receiveRejection
Remaining Time: 290.22546630859375
Info received: {'text': 'I will also offer you 1 milk for 0.49 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396830.8257, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}, 'rationale': 'Quantity of agents messages exceeded'}
Received message: {'text': 'I will also offer you 1 milk for 0.49 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396830.8257, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}, 'rationale': 'Quantity of agents messages exceeded'}
Returning response: {'status': 'Acknowledged', 'message': {'text': 'I will also offer you 1 milk for 0.49 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396830.8257, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}, 'rationale': 'Quantity of agents messages exceeded'}}
127.0.0.1 - - [26/Oct/2020 19:53:16] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
[2020-10-26 19:55:14,035] ERROR in app: Exception on /receiveMessage [POST]











020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>run_agent001.cmd

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14007
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14007/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.46}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.87}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.37}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.26}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.26}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.3}}}, 'name': 'Watson'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.46}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.87}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.37}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.26}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.26}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.3}}}, 'name': 'Watson'}}
127.0.0.1 - - [26/Oct/2020 20:00:23] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-27T00:00:28.552Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 20:00:28] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 296.7426645507812
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.3680595053086648}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.3661654}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.3661654}}
Message from buyer to me
Entering mayIRespond
Need to make it so can't respond if just responded and human hasn't responded.             Check history to see if human responded?
Returning reponse: True
Buyer is making an BuyRequest
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.3661654}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.3661654}}
BidBlock['type']: BuyRequest
Recent offers: []
Last price: None
Remaining time: 295.1860627441406
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.46}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.87}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.37}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.26}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.26}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.3}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.3661654}}
no currency units provided
Returning utility: -0.37
Utility received: -0.37
Buyer did not propose price or other agent made an offer. Going to generate price
No history of any SellOffers. Going to propose price
Going to markup price by 2.4354890424386566
Entering quantize
Received quantity: 0.5311309457023029
Received decimals: 2
Returning value: 0.53
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.53}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.53}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.53 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.53}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.53}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.53}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.53}}}
Entering receiveMessage
Remaining Time: 295.1476511230469
Info received: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.53 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8432246208190919}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.53, 'unit': 'USD'}
Received price: {'value': 0.53, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.3661654}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}
127.0.0.1 - - [26/Oct/2020 20:00:34] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 292.5906821289062
Info received: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.5 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8470802307128906}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.5, 'unit': 'USD'}
Received price: {'value': 0.5, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.3661654}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}]
Last price: 0.5
Remaining time: 289.9650505371094
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.46}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.87}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.37}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.26}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.26}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.3}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}
Currency units match
Returning utility: -0.37
Utility received: -0.37
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}]
We've made a SellOffer before!
myLastPrice: 0.53
Our offer was worse. Reached minMarkupRatio so going to match or repeat our last offer
Returning bid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}
Received confirm: False
bid is a minMarkup
min offer was made by other agent
Going to match other agent's offer
Returning response: I will also offer you 1 milk for 0.5 USD. Our products are organic and Non-GMO.
Returning bidResponse: {'text': 'I will also offer you 1 milk for 0.5 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756838637.6887, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}}
Bid message from processMessage: {'text': 'I will also offer you 1 milk for 0.5 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756838637.6887, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}}
Sending message: {'text': 'I will also offer you 1 milk for 0.5 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756838637.6887, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}}
Sending message to orchestrator: {'text': 'I will also offer you 1 milk for 0.5 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756838637.6887, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}}
Entering receiveRejection
Remaining Time: 289.91351171875
Info received: {'text': 'I will also offer you 1 milk for 0.5 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756838637.6887, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}
Received message: {'text': 'I will also offer you 1 milk for 0.5 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756838637.6887, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}
Returning response: {'status': 'Acknowledged', 'message': {'text': 'I will also offer you 1 milk for 0.5 USD. Our products are organic and Non-GMO.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756838637.6887, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia', 'action': 'match'}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}}
127.0.0.1 - - [26/Oct/2020 20:00:38] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 286.34170068359373
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Watson I don't like your offer", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}
Returning Watson response: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.8488574}}
Received interpretation: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.8488574}}
Message from buyer to me
Buyer rejected offer
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}]
Entering generateBid
Received offer: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.8488574}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.3661654}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.8488574}}
BidBlock['type']: RejectOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}]
Last price: 0.5
Remaining time: 285.69040600585936
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.46}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.87}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.37}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.26}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.26}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.3}}}, 'name': 'Watson'}
Received bundle: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.8488574}, 'quantity': {'milk': 1}}
no currency units provided
Returning utility: -0.37
Utility received: -0.37
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}]
We've made a SellOffer before!
myLastPrice: 0.5
Our offer is better than or equal to this offer
Returning bid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}
Received confirm: False
bid is a minMarkup
min offer was made by us!
Returning random messge: That's the best I can do. You won't find a better deal out there!
Returning response: My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!
Returning bidResponse: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}}
Bid message from processMessage: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}}
Sending message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}}
Sending message to orchestrator: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}}
Entering receiveMessage
Remaining Time: 285.631708984375
Info received: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}
This message is from me!
Entering processMessage
Received message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}
Returning Watson response: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'MinOffer', 'confidence': 0.973372507095337}]
entities:  [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.5, 'unit': 'USD'}
Received price: {'value': 0.5, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.4903667}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.4903667}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.3661654}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.8488574}, 'quantity': {'milk': 1}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.4903667}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.4903667}}
127.0.0.1 - - [26/Oct/2020 20:00:43] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 282.9384990234375
Info received: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}
Entering processMessage
Received message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}
Returning Watson response: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'MinOffer', 'confidence': 0.973372507095337}]
entities:  [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.5, 'unit': 'USD'}
Received price: {'value': 0.5, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.401767}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.401767}}
Message from another seller. Need to make an offer!
Message type: MinOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.401767}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.3661654}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.8488574}, 'quantity': {'milk': 1}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.4903667}}
BidBlock['type']: MinOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.401767}}
BidBlock['type']: MinOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.5945597}}]
Last price: 0.5
Remaining time: 280.1452321777344
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.46}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.87}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.37}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.26}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.26}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.3}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.401767}}
Currency units match
Returning utility: 0.13
Utility received: 0.13
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756834.0020213}}]
We've made a SellOffer before!
myLastPrice: 0.5
Our offer is better than or equal to this offer
Returning bid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}
Received confirm: False
bid is a minMarkup
min offer was made by us!
Returning random messge: That's the best I can do. You won't find a better deal out there!
Returning response: My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!
Returning bidResponse: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756848447.4392, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}}
Bid message from processMessage: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756848447.4392, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}}
Sending message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756848447.4392, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}}
Sending message to orchestrator: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756848447.4392, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}}
Entering receiveRejection
Remaining Time: 280.10138403320315
Info received: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756848447.4392, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}
Received message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756848447.4392, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}
Returning response: {'status': 'Acknowledged', 'message': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756848447.4392, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Watson'}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}}
127.0.0.1 - - [26/Oct/2020 20:00:48] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 273.33951708984375
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220, 'timeStamp': 1603756855.795063}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220, 'timeStamp': 1603756855.795063}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Other agent accepted/rejected offer. Clearing bidHistory
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220, 'timeStamp': 1603756855.795063}}
127.0.0.1 - - [26/Oct/2020 20:00:55] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 272.69622802734375
Info received: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}
Entering processMessage
Received message: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}]
entities:  [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'timeStamp': 1603756856.65727}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'timeStamp': 1603756856.65727}}
Message from another seller. Need to make an offer!
Message type: AcceptOffer
