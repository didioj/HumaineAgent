
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14007
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14007/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}}
127.0.0.1 - - [26/Oct/2020 22:09:38] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-27T02:09:43.959Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 22:09:43] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 299.02217138671875
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.3680595053086648}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
Message from buyer to me
Entering mayIRespond
Need to make it so can't respond if just responded and human hasn't responded.             Check history to see if human responded?
Returning reponse: True
Buyer is making an BuyRequest
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
BidBlock['type']: BuyRequest
Recent offers: []
Last price: None
Last offer: None
Remaining time: 297.8877434082031
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
no currency units provided
Returning utility: -0.38
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
no currency units provided
Returning utility: -0.38
Total items: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
Total cost of items (should be negative): -0.38
Utility received: -0.38
Buyer did not propose price or other agent made an offer. Going to generate price
No history of any SellOffers. Going to propose price
Going to markup price by 2.9080567474846215
Entering quantize
Received quantity: 0.7250615640441562
Received decimals: 2
Returning value: 0.73
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.73}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.73}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.73 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.73}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.73}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.73}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.73}}}
Entering receiveMessage
Remaining Time: 297.87078735351565
Info received: {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.73 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8531348228454589}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73}, 'interpretation': {'numeric_value': 0.73, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.73, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8531348228454589}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73}, 'interpretation': {'numeric_value': 0.73, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.73, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8531348228454589}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73}, 'interpretation': {'numeric_value': 0.73, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.73, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8531348228454589}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73}, 'interpretation': {'numeric_value': 0.73, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.73, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8531348228454589}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73}, 'interpretation': {'numeric_value': 0.73, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.73, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8531348228454589}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73}, 'interpretation': {'numeric_value': 0.73, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.73, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73}, 'interpretation': {'numeric_value': 0.73, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.73, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73}, 'interpretation': {'numeric_value': 0.73, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.73, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73}, 'interpretation': {'numeric_value': 0.73, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.73', 'confidence': 1, 'metadata': {'numeric_value': 0.73, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.73, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.73, 'unit': 'USD'}
Received price: {'value': 0.73, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}, {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}
127.0.0.1 - - [26/Oct/2020 22:09:46] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 295.24107055664064
Info received: {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.64 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.861077928543091}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64}, 'interpretation': {'numeric_value': 0.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.861077928543091}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64}, 'interpretation': {'numeric_value': 0.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.861077928543091}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64}, 'interpretation': {'numeric_value': 0.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.861077928543091}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64}, 'interpretation': {'numeric_value': 0.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.861077928543091}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64}, 'interpretation': {'numeric_value': 0.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.861077928543091}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64}, 'interpretation': {'numeric_value': 0.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.64, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64}, 'interpretation': {'numeric_value': 0.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.64, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64}, 'interpretation': {'numeric_value': 0.64, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.64, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64}, 'interpretation': {'numeric_value': 0.64, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.64', 'confidence': 1, 'metadata': {'numeric_value': 0.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.64, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.64, 'unit': 'USD'}
Received price: {'value': 0.64, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}]
Last price: 0.64
Last offer: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
Remaining time: 292.5289580078125
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
Currency units match
Returning utility: -0.38
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
no currency units provided
Returning utility: -0.38
Total items: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
Total cost of items (should be negative): -0.38
Utility received: -0.38
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}]
We've made a SellOffer before!
myLastPrice: 0.73
lastPrice can still be reduced
This is the lowest offer so far. Going to reduce
Calcuated last markupRatio: 0.6842105263157894
Going to markup price by 2.518804542237405
Entering quantize
Received quantity: 0.577145726050214
Received decimals: 2
Returning value: 0.58
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.58}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.58}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.58 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.58 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764591442.5508, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.58}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.58 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764591442.5508, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.58}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.58 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764591442.5508, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.58}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.58 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764591442.5508, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.58}}}
Entering receiveRejection
Remaining Time: 292.5179880371094
Info received: {'text': 'How about if I sell you 1 milk for 0.58 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764591442.5508, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.58}}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}
Received message: {'text': 'How about if I sell you 1 milk for 0.58 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764591442.5508, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.58}}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}
Returning response: {'status': 'Acknowledged', 'message': {'text': 'How about if I sell you 1 milk for 0.58 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764591442.5508, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.58}}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}}
127.0.0.1 - - [26/Oct/2020 22:09:51] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 275.8895891113281
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "watson I don't like your offer", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063}
Returning Watson response: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}}
Received interpretation: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}}
Message from buyer to me
Buyer rejected offer
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}]
Entering generateBid
Received offer: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}}
BidBlock['type']: RejectOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}]
Last price: 0.64
Last offer: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
Remaining time: 274.97155053710935
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}
no currency units provided
Returning utility: -0.38
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}
no currency units provided
Returning utility: -0.38
Total items: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}
Total cost of items (should be negative): -0.38
Utility received: -0.38
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}]
We've made a SellOffer before!
myLastPrice: 0.73
lastPrice can still be reduced
This is the lowest offer so far. Going to reduce
Calcuated last markupRatio: 0.6842105263157894
Going to markup price by 2.601997048561386
Entering quantize
Received quantity: 0.6087588784533267
Received decimals: 2
Returning value: 0.61
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.61 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}}
Entering receiveMessage
Remaining Time: 274.93458911132814
Info received: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.61 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8662149906158447}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8662149906158447}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8662149906158447}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8662149906158447}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8662149906158447}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8662149906158447}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.61, 'unit': 'USD'}
Received price: {'value': 0.61, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}, {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}
127.0.0.1 - - [26/Oct/2020 22:10:09] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 272.37631420898435
Info received: {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.57 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8519327163696289}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8519327163696289}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8519327163696289}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8519327163696289}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8519327163696289}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8519327163696289}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.57, 'unit': 'USD'}
Received price: {'value': 0.57, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}]
Last price: 0.57
Last offer: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
Remaining time: 269.9171352539062
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
Currency units match
Returning utility: -0.38
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
no currency units provided
Returning utility: -0.38
Total items: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
Total cost of items (should be negative): -0.38
Utility received: -0.38
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}]
We've made a SellOffer before!
myLastPrice: 0.61
lastPrice can still be reduced
This is the lowest offer so far. Going to reduce
Calcuated last markupRatio: 0.5
Going to markup price by 2.4457324041403172
Entering quantize
Received quantity: 0.5493783135733206
Received decimals: 2
Returning value: 0.55
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.55}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.55}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.55 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.55 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764614075.3066, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.55}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.55 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764614075.3066, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.55}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.55 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764614075.3066, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.55}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.55 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764614075.3066, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.55}}}
Entering receiveRejection
Remaining Time: 269.867279296875
Info received: {'text': 'How about if I sell you 1 milk for 0.55 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764614075.3066, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.55}}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}
Received message: {'text': 'How about if I sell you 1 milk for 0.55 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764614075.3066, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.55}}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}
Returning response: {'status': 'Acknowledged', 'message': {'text': 'How about if I sell you 1 milk for 0.55 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764614075.3066, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.55}}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}}
127.0.0.1 - - [26/Oct/2020 22:10:14] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 260.1136240234375
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Celia I don't like your offer", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838}
Returning Watson response: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}
Received interpretation: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}, {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}]}
Entering receiveMessage
Remaining Time: 259.5030935058594
Info received: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.53 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8432246208190919}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.53, 'unit': 'USD'}
Received price: {'value': 0.53, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}]
Last price: 0.53
Last offer: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
Remaining time: 256.8662849121094
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
Currency units match
Returning utility: -0.38
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
no currency units provided
Returning utility: -0.38
Total items: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
Total cost of items (should be negative): -0.38
Utility received: -0.38
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}]
We've made a SellOffer before!
myLastPrice: 0.61
lastPrice can still be reduced
This is the lowest offer so far. Going to reduce
Calcuated last markupRatio: 0.3947368421052633
Going to markup price by 2.3490214002931493
Entering quantize
Received quantity: 0.5126281321113968
Received decimals: 2
Returning value: 0.51
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.51}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.51}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.51 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.51}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.51}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.51}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.51}}}
Entering receiveMessage
Remaining Time: 256.8533176269531
Info received: {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.51 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Human's history: [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}, {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}]
Most recent human history: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
Most recent human history should be: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}
bidHistory changed, going to do nothing.
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}
127.0.0.1 - - [26/Oct/2020 22:10:27] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8640507221221925}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8640507221221925}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8640507221221925}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8640507221221925}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8640507221221925}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8640507221221925}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.51, 'unit': 'USD'}
Received price: {'value': 0.51, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}, {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}
127.0.0.1 - - [26/Oct/2020 22:10:27] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 249.74573291015625
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "watson I don't like your offer", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212}
Returning Watson response: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}}
Received interpretation: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}}
Message from buyer to me
Buyer rejected offer
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}]
Entering generateBid
Received offer: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}}
BidBlock['type']: RejectOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}]
Last price: 0.51
Last offer: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}
Remaining time: 249.2979309082031
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}, 'quantity': {'milk': 1}}
no currency units provided
Returning utility: -0.38
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}, 'quantity': {'milk': 1}}
no currency units provided
Returning utility: -0.38
Total items: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}, 'quantity': {'milk': 1}}
Total cost of items (should be negative): -0.38
Utility received: -0.38
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}]
We've made a SellOffer before!
myLastPrice: 0.51
lastPrice can still be reduced
This is the lowest offer so far. Going to reduce
Calcuated last markupRatio: 0.3421052631578947
Going to markup price by 2.2863720917003976
Entering quantize
Received quantity: 0.48882139484615106
Received decimals: 2
Returning value: 0.49
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.49 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}}
Entering receiveMessage
Remaining Time: 249.27798486328126
Info received: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.49 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8477288722991945}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.49, 'unit': 'USD'}
Received price: {'value': 0.49, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}, {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}, 'quantity': {'milk': 1}}, {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}
127.0.0.1 - - [26/Oct/2020 22:10:35] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 246.71600170898438
Info received: {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.47 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8425072669982911}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47}, 'interpretation': {'numeric_value': 0.47, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.47, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8425072669982911}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47}, 'interpretation': {'numeric_value': 0.47, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.47, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8425072669982911}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47}, 'interpretation': {'numeric_value': 0.47, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.47, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8425072669982911}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47}, 'interpretation': {'numeric_value': 0.47, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.47, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8425072669982911}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47}, 'interpretation': {'numeric_value': 0.47, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.47, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8425072669982911}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47}, 'interpretation': {'numeric_value': 0.47, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.47, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47}, 'interpretation': {'numeric_value': 0.47, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.47, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47}, 'interpretation': {'numeric_value': 0.47, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.47, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47}, 'interpretation': {'numeric_value': 0.47, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.47', 'confidence': 1, 'metadata': {'numeric_value': 0.47, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.47, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.47, 'unit': 'USD'}
Received price: {'value': 0.47, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.47, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.47, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.47, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.47, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}, 'quantity': {'milk': 1}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.47, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}, {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}, {'quantity': {'milk': 1}, 'price': {'value': 0.47, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}]
Last price: 0.47
Last offer: {'quantity': {'milk': 1}, 'price': {'value': 0.47, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}
Remaining time: 244.00997241210936
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.47, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}
Currency units match
Returning utility: -0.38
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}
no currency units provided
Returning utility: -0.38
Total items: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}
Total cost of items (should be negative): -0.38
Utility received: -0.38
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}, {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}]
We've made a SellOffer before!
myLastPrice: 0.49
Reached minMarkupRatio: 1.2368421052631577
Going to offer 1 cent cheaper
Entering quantize
Received quantity: 0.45999999999999996
Received decimals: 2
Returning value: 0.46
Returning bid: {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.46, 'unit': 'USD'}, 'speaker': 'Watson'}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.46, 'unit': 'USD'}, 'speaker': 'Watson'}
Received confirm: False
bid is a minMarkupExcuse
Returning random messge: I have 5 cats at home to feed.
Returning response: I have 5 cats at home to feed. 0.46 USD for 1 milk is a great deal.
Returning bidResponse: {'text': 'I have 5 cats at home to feed. 0.46 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764639964.0667, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.46, 'unit': 'USD'}, 'speaker': 'Watson'}}
Bid message from processMessage: {'text': 'I have 5 cats at home to feed. 0.46 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764639964.0667, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.46, 'unit': 'USD'}, 'speaker': 'Watson'}}
Sending message: {'text': 'I have 5 cats at home to feed. 0.46 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764639964.0667, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.46, 'unit': 'USD'}, 'speaker': 'Watson'}}
Sending message to orchestrator: {'text': 'I have 5 cats at home to feed. 0.46 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764639964.0667, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.46, 'unit': 'USD'}, 'speaker': 'Watson'}}
Entering receiveRejection
Remaining Time: 243.99547607421874
Info received: {'text': 'I have 5 cats at home to feed. 0.46 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764639964.0667, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.46, 'unit': 'USD'}, 'speaker': 'Watson'}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}
Received message: {'text': 'I have 5 cats at home to feed. 0.46 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764639964.0667, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.46, 'unit': 'USD'}, 'speaker': 'Watson'}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}
Returning response: {'status': 'Acknowledged', 'message': {'text': 'I have 5 cats at home to feed. 0.46 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764639964.0667, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.46, 'unit': 'USD'}, 'speaker': 'Watson'}, 'rationale': 'Addressee message delayed, Quantity of agents messages exceeded'}}
127.0.0.1 - - [26/Oct/2020 22:10:39] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 241.002734375
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Watson I don't like your offer", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955}
Returning Watson response: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955, 'timeStamp': 1603764643.5027099}}
Received interpretation: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955, 'timeStamp': 1603764643.5027099}}
Message from buyer to me
Buyer rejected offer
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}, {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}]
Entering generateBid
Received offer: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955, 'timeStamp': 1603764643.5027099}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}, 'quantity': {'milk': 1}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955, 'timeStamp': 1603764643.5027099}}
BidBlock['type']: RejectOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}, {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}, {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}]
Last price: 0.46
Last offer: {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}
Remaining time: 240.40897094726563
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955, 'timeStamp': 1603764643.5027099}, 'quantity': {'milk': 1}}
no currency units provided
Returning utility: -0.38
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.8}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.35}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.26}}}, 'name': 'Watson'}
Received bundle: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955, 'timeStamp': 1603764643.5027099}, 'quantity': {'milk': 1}}
no currency units provided
Returning utility: -0.38
Total items: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955, 'timeStamp': 1603764643.5027099}, 'quantity': {'milk': 1}}
Total cost of items (should be negative): -0.38
Utility received: -0.38
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}, {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}]
We've made a SellOffer before!
myLastPrice: 0.49
Reached minMarkupRatio: 1.2105263157894737
Going to offer 1 cent cheaper
Entering quantize
Received quantity: 0.45
Received decimals: 2
Returning value: 0.45
Returning bid: {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.45, 'unit': 'USD'}, 'speaker': 'Watson'}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.45, 'unit': 'USD'}, 'speaker': 'Watson'}
Received confirm: False
bid is a minMarkupExcuse
Returning random messge: I have 5 cats at home to feed.
Returning response: I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.
Returning bidResponse: {'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764643568.5254, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.45, 'unit': 'USD'}, 'speaker': 'Watson'}}
Bid message from processMessage: {'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764643568.5254, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.45, 'unit': 'USD'}, 'speaker': 'Watson'}}
Sending message: {'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764643568.5254, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.45, 'unit': 'USD'}, 'speaker': 'Watson'}}
Sending message to orchestrator: {'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764643568.5254, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkupExcuse', 'price': {'value': 0.45, 'unit': 'USD'}, 'speaker': 'Watson'}}
Entering receiveMessage
Remaining Time: 240.37306591796874
Info received: {'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764643568.5254}
This message is from me!
Entering processMessage
Received message: {'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764643568.5254}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '5', 'confidence': 1, 'metadata': {'numeric_value': 5}, 'interpretation': {'numeric_value': 5, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [31, 35], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [31, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}, {'entity': 'sys-number', 'location': [44, 45], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [46, 50], 'value': 'milk', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '5', 'confidence': 1, 'metadata': {'numeric_value': 5}, 'interpretation': {'numeric_value': 5, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [31, 35], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [31, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}, {'entity': 'sys-number', 'location': [44, 45], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [46, 50], 'value': 'milk', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764643568.5254}
Returning Watson response: {'intents': [], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '5', 'confidence': 1, 'metadata': {'numeric_value': 5}, 'interpretation': {'numeric_value': 5, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [31, 35], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [31, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}, {'entity': 'sys-number', 'location': [44, 45], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [46, 50], 'value': 'milk', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764643568.5254}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '5', 'confidence': 1, 'metadata': {'numeric_value': 5}, 'interpretation': {'numeric_value': 5, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [31, 35], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [31, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}, {'entity': 'sys-number', 'location': [44, 45], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [46, 50], 'value': 'milk', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764643568.5254}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '5', 'confidence': 1, 'metadata': {'numeric_value': 5}, 'interpretation': {'numeric_value': 5, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [31, 35], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [31, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}, {'entity': 'sys-number', 'location': [44, 45], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [46, 50], 'value': 'milk', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'I have 5 cats at home to feed. 0.45 USD for 1 milk is a great deal.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764643568.5254}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  []
entities:  [{'entity': 'sys-number', 'location': [7, 8], 'value': '5', 'confidence': 1, 'metadata': {'numeric_value': 5}, 'interpretation': {'numeric_value': 5, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [31, 35], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [31, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}, {'entity': 'sys-number', 'location': [44, 45], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [46, 50], 'value': 'milk', 'confidence': 1}]
[2020-10-26 22:10:44,223] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 167, in receiveMessage
    bidMessage = processMessage(message)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 575, in processMessage
    interpretation = extract_bid.interpretMessage(classification)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\extract-bid.py", line 20, in interpretMessage
    if intents[0]['intent'] == "Offer" and intents[0]['confidence'] > 0.2:
IndexError: list index out of range
127.0.0.1 - - [26/Oct/2020 22:10:44] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955, 'timeStamp': 1603764643.5027099}}
127.0.0.1 - - [26/Oct/2020 22:10:44] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 212.11362939453124
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764671838}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764671838}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.4719918425304968}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.4719918425304968}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764671838}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.4719918425304968}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764671838}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.4719918425304968}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764671838}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.4719918425304968}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764671838}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.4719918425304968}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764671838, 'timeStamp': 1603764672.6535273}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764671838, 'timeStamp': 1603764672.6535273}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764584935, 'timeStamp': 1603764586.0757883}}, {'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764588696.5376, 'timeStamp': 1603764589.4264224}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764608063, 'timeStamp': 1603764608.9770274}, 'quantity': {'milk': 1}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764611577.2432, 'timeStamp': 1603764612.0248828}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': "Celia I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764623838, 'timeStamp': 1603764624.4315243}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764624446.4768, 'timeStamp': 1603764625.0817509}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634212, 'timeStamp': 1603764634.6636045}, 'quantity': {'milk': 1}}, {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}, {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.47 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764637218.6025, 'timeStamp': 1603764637.9442334}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764642955, 'timeStamp': 1603764643.5027099}, 'quantity': {'milk': 1}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.73, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.73 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764586082.7688, 'timeStamp': 1603764586.532743}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764609005.9392, 'timeStamp': 1603764609.5258586}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764627100.2378, 'timeStamp': 1603764627.6773875}}, {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764634676.5718, 'timeStamp': 1603764635.2680914}}
Sending bid to translate: {'price': {'value': 0.49, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.49, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: I'm so glad! This is to confirm that I'll give you
Returning response: I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.
Clearing bidHistory
Returning message: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924, 'bid': {'price': {'value': 0.49, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924, 'bid': {'price': {'value': 0.49, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924, 'bid': {'price': {'value': 0.49, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924, 'bid': {'price': {'value': 0.49, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 211.29707104492186
Info received: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924}
This message is from me!
Entering processMessage
Received message: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.4278613703396502}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.4278613703396502}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.4278613703396502}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.4278613703396502}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.4278613703396502}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.4278613703396502}]
entities:  [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924, 'timeStamp': 1603764673.1504803}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924, 'timeStamp': 1603764673.1504803}}
Received own message
We accepted/rejected offer. Clearing bidHistory
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.49 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603764672654.4924, 'timeStamp': 1603764673.1504803}}
127.0.0.1 - - [26/Oct/2020 22:11:13] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603764671838, 'timeStamp': 1603764672.6535273}}
127.0.0.1 - - [26/Oct/2020 22:11:15] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -






