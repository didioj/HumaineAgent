127.0.0.1 - - [24/Nov/2020 21:23:09] "[37mPOST /startRound HTTP/1.1[0m" 200 -
- Entering receiveMessage
- Remaining Time: 284.1321760253906
- Info received: {'speaker': 'Human', 'addressee': '', 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394}
- Entering processMessage
- Received message: {'speaker': 'Human', 'addressee': '', 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394}
- Entering classifyMessage
- Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'I want to make 1 cake', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
- Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'BundleRequest', 'confidence': 0.9608427047729493}], 'entities': [{'entity': 'sys-number', 'location': [15, 16], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'bundle', 'location': [17, 21], 'value': 'cake', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Entering translateWatsonResponse
- Received response: {'output': {'intents': [{'intent': 'BundleRequest', 'confidence': 0.9608427047729493}], 'entities': [{'entity': 'sys-number', 'location': [15, 16], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'bundle', 'location': [17, 21], 'value': 'cake', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Received input_: {'speaker': 'Human', 'addressee': '', 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394}
- Returning Watson response: {'intents': [{'intent': 'BundleRequest', 'confidence': 0.9608427047729493}], 'entities': [{'entity': 'sys-number', 'location': [15, 16], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'bundle', 'location': [17, 21], 'value': 'cake', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394}, 'addressee': '', 'speaker': 'Human'}
- Received message classification: {'intents': [{'intent': 'BundleRequest', 'confidence': 0.9608427047729493}], 'entities': [{'entity': 'sys-number', 'location': [15, 16], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'bundle', 'location': [17, 21], 'value': 'cake', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394}, 'addressee': '', 'speaker': 'Human'}
- entered interpretMessage
- Received watsonResponse: {'intents': [{'intent': 'BundleRequest', 'confidence': 0.9608427047729493}], 'entities': [{'entity': 'sys-number', 'location': [15, 16], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'bundle', 'location': [17, 21], 'value': 'cake', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394}, 'addressee': '', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
- intents from watsonResponse: [{'intent': 'BundleRequest', 'confidence': 0.9608427047729493}]
- entities from watsonResponse: [{'entity': 'sys-number', 'location': [15, 16], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'bundle', 'location': [17, 21], 'value': 'cake', 'confidence': 1}]
- input from watsonResponse: {'speaker': 'Human', 'addressee': '', 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394}
- intents:  [{'intent': 'BundleRequest', 'confidence': 0.9608427047729493}]
- entities:  [{'entity': 'sys-number', 'location': [15, 16], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'bundle', 'location': [17, 21], 'value': 'cake', 'confidence': 1}]
- entered extractOfferFromEntities
- Received entityList: [{'entity': 'sys-number', 'location': [15, 16], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'bundle', 'location': [17, 21], 'value': 'cake', 'confidence': 1}]
- Found entities: []
- entered extractPrice
- entities given: []
- Returning price: None
- Received price: None
- Returning offer: {'quantity': {'cake': 1}, 'price': None}
- entered extractAddressee
- Received entities: [{'entity': 'sys-number', 'location': [15, 16], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'bundle', 'location': [17, 21], 'value': 'cake', 'confidence': 1}]
- cmd leaving interpretMessage: {'quantity': {'cake': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}
- Received interpretation: {'quantity': {'cake': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}
- Message from buyer not addressed to me. Need to wait for other agent to respond
- Added to bidHistory: {'Human': [{'quantity': {'cake': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}]}
- Human's history: [{'quantity': {'cake': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}]
- Most recent human history: {'quantity': {'cake': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}
- Most recent human history should be: {'quantity': {'cake': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}
- Bundle request detected. Need to process interpretation for generateBid.
- Getting ingredients for: cake
- unit_ingredients: {'egg': 2, 'flour': 2, 'milk': 1, 'sugar': 1}
- Calculated ingredients needed: {'egg': 2, 'flour': 2, 'milk': 1, 'sugar': 1}
- Entering generateBid
- Received offer: {'quantity': {'egg': 2, 'flour': 2, 'milk': 1, 'sugar': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}
- BidBlock: {'quantity': {'egg': 2, 'flour': 2, 'milk': 1, 'sugar': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}
- BidBlock['type']: BundleRequest
- Recent offers: []
- Last price: None
- Last offer: None
- Remaining time: 279.3576706542969
- Entering calculateUtilityAgent
- Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.37}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.86}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.64}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.39}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.35}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.28}}}, 'name': 'Celia'}
- Received bundle: {'quantity': {'egg': 2, 'flour': 2, 'milk': 1, 'sugar': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}
- no currency units provided
- Returning utility: -3.48
- Entering calculateUtilityAgent
- Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.37}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.86}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.64}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.39}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.35}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.28}}}, 'name': 'Celia'}
- Received bundle: {'quantity': {'egg': 2, 'flour': 2, 'milk': 1, 'sugar': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}
- no currency units provided
- Returning utility: -3.48
- Total items: {'quantity': {'egg': 2, 'flour': 2, 'milk': 1, 'sugar': 1}, 'type': 'BundleRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}
- Total cost of items (should be negative): -3.48
- Utility received: -3.48
- Buyer did not propose price or other agent made an offer. Going to generate price
- No history of any SellOffers. Going to propose price
- Going to markup price by 2.0018147526559638
- Entering quantize
- Received quantity: 3.4863153392427537
- Received decimals: 2
- Returning value: 3.49
- Returning bid: {'quantity': {'egg': 2, 'flour': 2, 'milk': 1, 'sugar': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 3.49}}
- Entering translateBid
- Received bid: {'quantity': {'egg': 2, 'flour': 2, 'milk': 1, 'sugar': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 3.49}}
- Received confirm: False
- bid is a SellOffer
- Returning response: How about if I sell you 2 egg 2 flour 1 milk 1 sugar for 3.49 USD.
- Bid message from processMessage: None
- Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': None, 'text': 'I want to make 1 cake', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606271005394, 'timeStamp': 1606271007.155963}}
127.0.0.1 - - [24/Nov/2020 21:23:30] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
