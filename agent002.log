C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
- Entering setUtility
- Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.41}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.55}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.24}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.37}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.31}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.37}}}, 'name': 'Celia'}
- Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.41}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.55}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.24}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.37}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.31}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.37}}}, 'name': 'Celia'}}
127.0.0.1 - - [02/Dec/2020 17:06:54] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
- Entering startRound
- Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-12-02T22:06:56.131Z'}
- Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [02/Dec/2020 17:06:56] "[37mPOST /startRound HTTP/1.1[0m" 200 -
- Entering receiveMessage
- Remaining Time: 295.1099008789063
- Info received: {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018}
- Entering processMessage
- Received message: {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018}
- Entering classifyMessage
- Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'I want to buy 1 egg and 1 chicken', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
- Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3163091078551219}], 'entities': [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 19], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Entering translateWatsonResponse
- Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3163091078551219}], 'entities': [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 19], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Received input_: {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018}
- Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.3163091078551219}], 'entities': [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 19], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018}, 'addressee': '', 'speaker': 'Human'}
- Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.3163091078551219}], 'entities': [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 19], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018}, 'addressee': '', 'speaker': 'Human'}
- entered interpretMessage
- Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3163091078551219}], 'entities': [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 19], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018}, 'addressee': '', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
- intents from watsonResponse: [{'intent': 'Offer', 'confidence': 0.3163091078551219}]
- entities from watsonResponse: [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 19], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}]
- input from watsonResponse: {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018}
- intents:  [{'intent': 'Offer', 'confidence': 0.3163091078551219}]
- entities:  [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 19], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}]
- keywords: []
- entered extractOfferFromEntities
- Received entityList: [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 19], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}]
- Found entities: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}, 'index': 2}]
- entered extractPrice
- entities given: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}, 'index': 2}]
- Returning price: {'value': 1, 'unit': 'USD'}
- Received price: {'value': 1, 'unit': 'USD'}
- Returning offer: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}}
- entered extractAddressee
- Received entities: [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 19], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}]
- cmd leaving interpretMessage: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}
- Received interpretation: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}
- Message from buyer not addressed to me. Need to wait for other agent to respond
- Added to bidHistory: {'Human': [{'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}]}
- Human's history: [{'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}]
- Most recent human history: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}
- Most recent human history should be: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}
- No change to bidHistory. Going to make offer
- Entering bulkPriceMessage
- received interpretation: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}
- Entering generateBid
- Received offer: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}
- BidBlock: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}
- BidBlock['type']: BuyOffer
- Recent offers: []
- Entering calculateUtilityAgent
- Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.41}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.55}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.24}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.37}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.31}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.37}}}, 'name': 'Celia'}
- Received bundle: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}
- Currency units match
- Returning utility: 0.5900000000000001
- Entering calculateUtilityAgent
- Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.41}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.55}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.24}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.37}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.31}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.37}}}, 'name': 'Celia'}
- Received bundle: {'quantity': {'egg': 1}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}
- no currency units provided
- Returning utility: -0.41
- Total items: {'quantity': {'egg': 1}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 egg and 1 chicken', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946821018, 'timeStamp': 1606946822.7471747}}
- Total cost of items (should be negative): -0.41
- Utility received: 0.5900000000000001
Relevant Offers: []
- Last price: None
- Last offer: None
- Remaining time: 290.3833759765625
- Buyer proposed price! Going to consider it based on bundleCost (profit)
- Calculated bundleCost: 0.4099999999999999
- Calculated markupRatio: 1.4390243902439028
- Buyer's offer is workable. Going to generate a SellOffer
- Entering generateSellPrice
- Received bundleCost: 0.4099999999999999
- Received offerPrice: {'value': 1, 'unit': 'USD'}
- Received myLastPrice: None
- Received timeRemaining: 290.3833759765625
- Entering quantize
- Received quantity: 1.0173483433207926
- Received decimals: 2
- Returning value: 1.02
- Returning offering price: {'unit': 'USD', 'value': 1.02}
- Returning bid: {'quantity': {'egg': 1}, 'type': 'Accept', 'price': {'value': 1, 'unit': 'USD'}}
- Entering translateBid
- Received bid: {'quantity': {'egg': 1}, 'type': 'Accept', 'price': {'value': 1, 'unit': 'USD'}}
- Received confirm: False
- bid is a Accept
- Returning random messge: You've got a deal! I'll sell you
- Returning response: You've got a deal! I'll sell you 1 egg for 1 USD.
- Bid message from processMessage: {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825752.8857, 'bid': None}
- Sending message: {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825752.8857, 'bid': None}
- Sending message to orchestrator: {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825752.8857, 'bid': None}
- Entering receiveRejection
- Remaining Time: 290.3691291503906
- Entering receiveMessage
- Remaining Time: 290.36813134765623
- Info received: {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825752.8857, 'bid': None, 'rationale': 'Agents speaking at same time'}
- Received message: {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825752.8857, 'bid': None, 'rationale': 'Agents speaking at same time'}
- Returning response: {'status': 'Acknowledged', 'message': {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825752.8857, 'bid': None, 'rationale': 'Agents speaking at same time'}}
127.0.0.1 - - [02/Dec/2020 17:07:05] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
- Info received: {'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825751.8875, 'bid': None}
- Entering processMessage
- Received message: {'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825751.8875, 'bid': None}
- Entering classifyMessage
- Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
- Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9296545505523681}], 'entities': [{'entity': 'sys-number', 'location': [52, 53], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [54, 57], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [62, 67], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Entering translateWatsonResponse
- Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9296545505523681}], 'entities': [{'entity': 'sys-number', 'location': [52, 53], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [54, 57], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [62, 67], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Received input_: {'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825751.8875, 'bid': None}
- Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9296545505523681}], 'entities': [{'entity': 'sys-number', 'location': [52, 53], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [54, 57], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [62, 67], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825751.8875, 'bid': None}, 'addressee': 'Human', 'speaker': 'Watson'}
- Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9296545505523681}], 'entities': [{'entity': 'sys-number', 'location': [52, 53], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [54, 57], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [62, 67], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825751.8875, 'bid': None}, 'addressee': 'Human', 'speaker': 'Watson'}
- entered interpretMessage
- Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9296545505523681}], 'entities': [{'entity': 'sys-number', 'location': [52, 53], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [54, 57], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [62, 67], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825751.8875, 'bid': None}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
- intents from watsonResponse: [{'intent': 'AcceptOffer', 'confidence': 0.9296545505523681}]
- entities from watsonResponse: [{'entity': 'sys-number', 'location': [52, 53], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [54, 57], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [62, 67], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}]
- input from watsonResponse: {'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825751.8875, 'bid': None}
- intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9296545505523681}]
- entities:  [{'entity': 'sys-number', 'location': [52, 53], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [54, 57], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [62, 67], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}]
- keywords: []
- cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825751.8875, 'bid': None, 'timeStamp': 1606946826.2962706}}
- Received interpretation: {'type': 'AcceptOffer', 'metadata': {'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825751.8875, 'bid': None, 'timeStamp': 1606946826.2962706}}
- Message from another seller. Need to make an offer!
- Message type: AcceptOffer
- Other agent accepted/rejected offer. Clearing bidHistory
- Bid message from processMessage: None
- Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "I accept your offer. Just to confirm, I'll give you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946825751.8875, 'bid': None, 'timeStamp': 1606946826.2962706}}
127.0.0.1 - - [02/Dec/2020 17:07:08] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
- Entering receiveMessage
- Remaining Time: 268.53775317382815
- Info received: {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590}
- Entering processMessage
- Received message: {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590}
- Entering classifyMessage
- Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'I want to buy 1 chicken and 1 egg', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
- Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.39245440996455166}], 'entities': [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [28, 29], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [30, 33], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Entering translateWatsonResponse
- Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.39245440996455166}], 'entities': [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [28, 29], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [30, 33], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Received input_: {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590}
- Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.39245440996455166}], 'entities': [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [28, 29], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [30, 33], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590}, 'addressee': '', 'speaker': 'Human'}
- Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.39245440996455166}], 'entities': [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [28, 29], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [30, 33], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590}, 'addressee': '', 'speaker': 'Human'}
- entered interpretMessage
- Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.39245440996455166}], 'entities': [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [28, 29], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [30, 33], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590}, 'addressee': '', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
- intents from watsonResponse: [{'intent': 'Offer', 'confidence': 0.39245440996455166}]
- entities from watsonResponse: [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [28, 29], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [30, 33], 'value': 'egg', 'confidence': 1}]
- input from watsonResponse: {'speaker': 'Human', 'addressee': '', 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590}
- intents:  [{'intent': 'Offer', 'confidence': 0.39245440996455166}]
- entities:  [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [28, 29], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [30, 33], 'value': 'egg', 'confidence': 1}]
- keywords: []
- entered extractOfferFromEntities
- Received entityList: [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [28, 29], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [30, 33], 'value': 'egg', 'confidence': 1}]
- Found entities: [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}, 'index': 0}]
- entered extractPrice
- entities given: [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}, 'index': 0}]
- Returning price: {'value': 1, 'unit': 'USD'}
- Received price: {'value': 1, 'unit': 'USD'}
- Returning offer: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}}
- entered extractAddressee
- Received entities: [{'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'sys-number', 'location': [28, 29], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [30, 33], 'value': 'egg', 'confidence': 1}]
- cmd leaving interpretMessage: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
- Received interpretation: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
- Message from buyer not addressed to me. Need to wait for other agent to respond
- Added to bidHistory: {'Human': [{'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}]}
- Entering receiveMessage
- Remaining Time: 265.035494140625
- Info received: {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851090.791, 'bid': None}
- Entering processMessage
- Received message: {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851090.791, 'bid': None}
- Entering classifyMessage
- Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
- Human's history: [{'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}]
- Most recent human history: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
- Most recent human history should be: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
- No change to bidHistory. Going to make offer
- Entering bulkPriceMessage
- received interpretation: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
- Entering generateBid
- Received offer: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
- BidBlock: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
- BidBlock['type']: BuyOffer
- Recent offers: []
- Entering calculateUtilityAgent
- Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.41}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.55}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.24}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.37}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.31}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.37}}}, 'name': 'Celia'}
- Received bundle: {'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
- Currency units match
- Returning utility: 0.5900000000000001
- Entering calculateUtilityAgent
- Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.41}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.55}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.71}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.24}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.37}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.31}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.37}}}, 'name': 'Celia'}
- Received bundle: {'quantity': {'egg': 1}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
- no currency units provided
- Returning utility: -0.41
- Total items: {'quantity': {'egg': 1}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
- Total cost of items (should be negative): -0.41
- Utility received: 0.5900000000000001
Relevant Offers: []
- Last price: None
- Last offer: None
- Remaining time: 264.9971787109375
- Buyer proposed price! Going to consider it based on bundleCost (profit)
- Calculated bundleCost: 0.4099999999999999
- Calculated markupRatio: 1.4390243902439028
- Buyer's offer is workable. Going to generate a SellOffer
- Entering generateSellPrice
- Received bundleCost: 0.4099999999999999
- Received offerPrice: {'value': 1, 'unit': 'USD'}
- Received myLastPrice: None
- Received timeRemaining: 264.9971787109375
- Entering quantize
- Received quantity: 1.1036251932379453
- Received decimals: 2
- Returning value: 1.1
- Returning offering price: {'unit': 'USD', 'value': 1.1}
- Returning bid: {'quantity': {'egg': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.1}}
- Entering translateBid
- Received bid: {'quantity': {'egg': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.1}}
- Received confirm: False
- bid is a SellOffer
- Returning response: How about if I sell you 1 egg for 1.1 USD.
- Bid message from processMessage: {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None}
- Sending message: {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None}
- Sending message to orchestrator: {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None}
- Entering receiveMessage
- Remaining Time: 264.9842104492187
- Info received: {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None}
- This message is from me!
- Entering processMessage
- Received message: {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None}
- Entering classifyMessage
- Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 egg for 1.1 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
- Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9368456840515138}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [34, 41], 'value': '1.1', 'confidence': 1, 'metadata': {'numeric_value': 1.1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Entering translateWatsonResponse
- Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9368456840515138}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [34, 41], 'value': '1.1', 'confidence': 1, 'metadata': {'numeric_value': 1.1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Received input_: {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None}
- Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.9368456840515138}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [34, 41], 'value': '1.1', 'confidence': 1, 'metadata': {'numeric_value': 1.1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None}, 'addressee': 'Human', 'speaker': 'Celia'}
- Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.9368456840515138}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [34, 41], 'value': '1.1', 'confidence': 1, 'metadata': {'numeric_value': 1.1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None}, 'addressee': 'Human', 'speaker': 'Celia'}
- entered interpretMessage
- Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.9368456840515138}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [34, 41], 'value': '1.1', 'confidence': 1, 'metadata': {'numeric_value': 1.1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
- intents from watsonResponse: [{'intent': 'Offer', 'confidence': 0.9368456840515138}]
- entities from watsonResponse: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [34, 41], 'value': '1.1', 'confidence': 1, 'metadata': {'numeric_value': 1.1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.1, 'unit': 'USD'}}]
- input from watsonResponse: {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None}
- intents:  [{'intent': 'Offer', 'confidence': 0.9368456840515138}]
- entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [34, 41], 'value': '1.1', 'confidence': 1, 'metadata': {'numeric_value': 1.1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.1, 'unit': 'USD'}}]
- keywords: []
- entered extractOfferFromEntities
- Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [34, 41], 'value': '1.1', 'confidence': 1, 'metadata': {'numeric_value': 1.1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.1, 'unit': 'USD'}}]
- Found entities: [{'entity': 'sys-currency', 'location': [34, 41], 'value': '1.1', 'confidence': 1, 'metadata': {'numeric_value': 1.1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.1, 'unit': 'USD'}, 'index': 2}]
- entered extractPrice
- entities given: [{'entity': 'sys-currency', 'location': [34, 41], 'value': '1.1', 'confidence': 1, 'metadata': {'numeric_value': 1.1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.1, 'unit': 'USD'}, 'index': 2}]
- Returning price: {'value': 1.1, 'unit': 'USD'}
- Received price: {'value': 1.1, 'unit': 'USD'}
- Returning offer: {'quantity': {'egg': 1}, 'price': {'value': 1.1, 'unit': 'USD'}}
- cmd leaving interpretMessage: {'quantity': {'egg': 1}, 'price': {'value': 1.1, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None, 'timeStamp': 1606946851.6230507}}
- Received interpretation: {'quantity': {'egg': 1}, 'price': {'value': 1.1, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None, 'timeStamp': 1606946851.6230507}}
- Received own message
- Adding message to bidHistory
- bidHistory: {'Human': [{'quantity': {'egg': 1}, 'price': {'value': 1, 'unit': 'USD'}, 'type': 'BuyOffer', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}, {'quantity': {'egg': 1}, 'price': {'value': 1.1, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None, 'timeStamp': 1606946851.6230507}}]}
- Bid message from processMessage: None
- Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 egg for 1.1 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851139.082, 'bid': None, 'timeStamp': 1606946851.6230507}}
127.0.0.1 - - [02/Dec/2020 17:07:31] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
- Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9036710262298584}], 'entities': [{'entity': 'keyword', 'location': [13, 17], 'value': 'deal', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 34], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [35, 38], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [43, 48], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Entering translateWatsonResponse
- Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9036710262298584}], 'entities': [{'entity': 'keyword', 'location': [13, 17], 'value': 'deal', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 34], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [35, 38], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [43, 48], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
- Received input_: {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851090.791, 'bid': None}
- Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9036710262298584}], 'entities': [{'entity': 'keyword', 'location': [13, 17], 'value': 'deal', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 34], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [35, 38], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [43, 48], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851090.791, 'bid': None}, 'addressee': 'Human', 'speaker': 'Watson'}
- Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9036710262298584}], 'entities': [{'entity': 'keyword', 'location': [13, 17], 'value': 'deal', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 34], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [35, 38], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [43, 48], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851090.791, 'bid': None}, 'addressee': 'Human', 'speaker': 'Watson'}
- entered interpretMessage
- Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9036710262298584}], 'entities': [{'entity': 'keyword', 'location': [13, 17], 'value': 'deal', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 34], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [35, 38], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [43, 48], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851090.791, 'bid': None}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
- intents from watsonResponse: [{'intent': 'AcceptOffer', 'confidence': 0.9036710262298584}]
- entities from watsonResponse: [{'entity': 'keyword', 'location': [13, 17], 'value': 'deal', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 34], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [35, 38], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [43, 48], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}]
- input from watsonResponse: {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851090.791, 'bid': None}
- intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9036710262298584}]
- entities:  [{'entity': 'keyword', 'location': [13, 17], 'value': 'deal', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 34], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [35, 38], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-currency', 'location': [43, 48], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1, 'unit': 'USD'}}]
- keywords: ['deal']
- cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851090.791, 'bid': None, 'timeStamp': 1606946851.6360605}, 'keywords': ['deal']}
- Received interpretation: {'type': 'AcceptOffer', 'metadata': {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851090.791, 'bid': None, 'timeStamp': 1606946851.6360605}, 'keywords': ['deal']}
- Message from another seller. Need to make an offer!
- Message type: AcceptOffer
- Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': None, 'text': 'I want to buy 1 chicken and 1 egg', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1606946847590, 'timeStamp': 1606946848.13413}}
127.0.0.1 - - [02/Dec/2020 17:07:33] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
- Other agent accepted/rejected offer. Clearing bidHistory
- Bid message from processMessage: None
- Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "You've got a deal! I'll sell you 1 egg for 1 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1606946851090.791, 'bid': None, 'timeStamp': 1606946851.6360605}}
127.0.0.1 - - [02/Dec/2020 17:07:33] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
