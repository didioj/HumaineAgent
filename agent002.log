llOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745303703.0078, 'timeStamp': 1603745304.2933404}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745303703.0078, 'timeStamp': 1603745304.2933404}}
127.0.0.1 - - [26/Oct/2020 16:48:24] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.54 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745302997.8647, 'timeStamp': 1603745303.6730742}}
127.0.0.1 - - [26/Oct/2020 16:48:24] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 288.7477062988281
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311147}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311147}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311147}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311147}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311147}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311147}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311147, 'timeStamp': 1603745311.7551537}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311147, 'timeStamp': 1603745311.7551537}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745301165, 'timeStamp': 1603745302.7549555}}, {'quantity': {'milk': 1}, 'price': {'value': 0.54, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.54 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745302997.8647, 'timeStamp': 1603745303.6730742}}, {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745303703.0078, 'timeStamp': 1603745304.2933404}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745303703.0078, 'timeStamp': 1603745304.2933404}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.51 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745303703.0078, 'timeStamp': 1603745304.2933404}}
Sending bid to translate: {'price': {'value': 0.51, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.51, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: Perfect! Just to confirm, I'm giving you
Returning response: Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.
Clearing bidHistory
Returning message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468, 'bid': {'price': {'value': 0.51, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468, 'bid': {'price': {'value': 0.51, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468, 'bid': {'price': {'value': 0.51, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468, 'bid': {'price': {'value': 0.51, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 288.0654611816406
Info received: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468}
This message is from me!
Entering processMessage
Received message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.45091474108574514}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.45091474108574514}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.45091474108574514}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.45091474108574514}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.45091474108574514}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.45091474108574514}]
entities:  [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51}, 'interpretation': {'numeric_value': 0.51, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.51', 'confidence': 1, 'metadata': {'numeric_value': 0.51, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.51, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.51, 'unit': 'USD'}
Received price: {'value': 0.51, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468, 'timeStamp': 1603745312.389081}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.51, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468, 'timeStamp': 1603745312.389081}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': None}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.51 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311770.9468, 'timeStamp': 1603745312.389081}}
127.0.0.1 - - [26/Oct/2020 16:48:32] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745311147, 'timeStamp': 1603745311.7551537}}
127.0.0.1 - - [26/Oct/2020 16:48:32] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 274.05506616210937
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745325852}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745325852}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I want 3 eggs', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745325852}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745325852}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745325852}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745325852}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.2564924607786452}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'egg': 3}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745325852, 'timeStamp': 1603745326.5394442}}
Received interpretation: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745325852, 'timeStamp': 1603745326.5394442}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745325852, 'timeStamp': 1603745326.5394442}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745325852, 'timeStamp': 1603745326.5394442}}
127.0.0.1 - - [26/Oct/2020 16:48:46] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Terminate batch job (Y/N)?
^C
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>run_agent002.cmd

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering endRound
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 16:53:19] "[37mPOST /endRound HTTP/1.1[0m" 200 -
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.45}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.56}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.95}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.2}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.3}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.36}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.39}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.45}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.56}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.95}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.2}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.3}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.36}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.39}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 16:53:20] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T20:53:25.841Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 16:53:25] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 296.62030004882814
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.3791877427488316}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234, 'timeStamp': 1603745610.641056}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234, 'timeStamp': 1603745610.641056}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234, 'timeStamp': 1603745610.641056}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234, 'timeStamp': 1603745610.641056}}
127.0.0.1 - - [26/Oct/2020 16:53:30] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 295.01033056640625
Info received: {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.46 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8763958930969238}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46}, 'interpretation': {'numeric_value': 0.46, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.46, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8763958930969238}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46}, 'interpretation': {'numeric_value': 0.46, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.46, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8763958930969238}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46}, 'interpretation': {'numeric_value': 0.46, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.46, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8763958930969238}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46}, 'interpretation': {'numeric_value': 0.46, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.46, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8763958930969238}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46}, 'interpretation': {'numeric_value': 0.46, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.46, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8763958930969238}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46}, 'interpretation': {'numeric_value': 0.46, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.46, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46}, 'interpretation': {'numeric_value': 0.46, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.46, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46}, 'interpretation': {'numeric_value': 0.46, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.46, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46}, 'interpretation': {'numeric_value': 0.46, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.46', 'confidence': 1, 'metadata': {'numeric_value': 0.46, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.46, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.46, 'unit': 'USD'}
Received price: {'value': 0.46, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466, 'timeStamp': 1603745611.44416}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466, 'timeStamp': 1603745611.44416}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466, 'timeStamp': 1603745611.44416}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234, 'timeStamp': 1603745610.641056}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466, 'timeStamp': 1603745611.44416}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466, 'timeStamp': 1603745611.44416}}]
Last price: 0.46
Remaining time: 294.40721948242185
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.45}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.56}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.95}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.2}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.3}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.36}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.39}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466, 'timeStamp': 1603745611.44416}}
Currency units match
Returning utility: -0.2
Utility received: -0.2
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 1.2999999999999998
Going to markup price by 3.1237323871646163
Entering quantize
Received quantity: 0.42474647743292326
Received decimals: 2
Returning value: 0.42
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.42}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.42}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.42 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.42}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.42}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.42}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.42}}}
Entering receiveMessage
Remaining Time: 294.35489794921875
Info received: {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.42 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8763872146606446}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8763872146606446}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8763872146606446}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8763872146606446}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8763872146606446}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8763872146606446}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.42, 'unit': 'USD'}
Received price: {'value': 0.42, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.42, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.42, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'timeStamp': 1603745612.1314204}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.42, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'timeStamp': 1603745612.1314204}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234, 'timeStamp': 1603745610.641056}}, {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466, 'timeStamp': 1603745611.44416}}, {'quantity': {'milk': 1}, 'price': {'value': 0.42, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'timeStamp': 1603745612.1314204}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'timeStamp': 1603745612.1314204}}
127.0.0.1 - - [26/Oct/2020 16:53:32] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466, 'timeStamp': 1603745611.44416}}
127.0.0.1 - - [26/Oct/2020 16:53:32] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 289.38630786132813
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745616453}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745616453}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745616453}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745616453}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745616453}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745616453}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745616453, 'timeStamp': 1603745617.0152545}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745616453, 'timeStamp': 1603745617.0152545}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745609234, 'timeStamp': 1603745610.641056}}, {'quantity': {'milk': 1}, 'price': {'value': 0.46, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.46 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745610813.5466, 'timeStamp': 1603745611.44416}}, {'quantity': {'milk': 1}, 'price': {'value': 0.42, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'timeStamp': 1603745612.1314204}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.42, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'timeStamp': 1603745612.1314204}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.42, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.42 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745611480.147, 'timeStamp': 1603745612.1314204}}
Sending bid to translate: {'price': {'value': 0.42, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.42, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: Perfect! Just to confirm, I'm giving you
Returning response: Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.
Clearing bidHistory
Returning message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792, 'bid': {'price': {'value': 0.42, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792, 'bid': {'price': {'value': 0.42, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792, 'bid': {'price': {'value': 0.42, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792, 'bid': {'price': {'value': 0.42, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 288.77510668945314
Info received: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792}
This message is from me!
Entering processMessage
Received message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.4588467522570682}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.4588467522570682}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.4588467522570682}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.4588467522570682}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.4588467522570682}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.4588467522570682}]
entities:  [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42}, 'interpretation': {'numeric_value': 0.42, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.42', 'confidence': 1, 'metadata': {'numeric_value': 0.42, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.42, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.42, 'unit': 'USD'}
Received price: {'value': 0.42, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.42, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.42, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792, 'timeStamp': 1603745617.602933}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.42, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792, 'timeStamp': 1603745617.602933}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': None}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.42 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745617025.8792, 'timeStamp': 1603745617.602933}}
127.0.0.1 - - [26/Oct/2020 16:53:37] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745616453, 'timeStamp': 1603745617.0152545}}
127.0.0.1 - - [26/Oct/2020 16:53:37] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 282.95163500976565
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745622897}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745622897}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I want 3 eggs', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745622897}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745622897}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745622897}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745622897}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.2564924607786452}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'egg': 3}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745622897, 'timeStamp': 1603745623.6897316}}
Received interpretation: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745622897, 'timeStamp': 1603745623.6897316}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745622897, 'timeStamp': 1603745623.6897316}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745622897, 'timeStamp': 1603745623.6897316}}
127.0.0.1 - - [26/Oct/2020 16:53:43] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering endRound
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 16:58:25] "[37mPOST /endRound HTTP/1.1[0m" 200 -
^CTerminate batch job (Y/N)?
^C
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>run_agent002.cmd

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.27}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.79}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.83}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.29}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.44}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.36}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.27}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.79}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.83}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.29}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.44}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.36}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 16:59:38] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T20:59:43.597Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 16:59:43] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 297.736640625
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.3791877427488316}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870, 'timeStamp': 1603745987.2669718}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870, 'timeStamp': 1603745987.2669718}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870, 'timeStamp': 1603745987.2669718}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870, 'timeStamp': 1603745987.2669718}}
127.0.0.1 - - [26/Oct/2020 16:59:47] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 296.21634912109374
Info received: {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.45 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8824126243591308}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8824126243591308}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8824126243591308}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8824126243591308}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8824126243591308}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8824126243591308}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.45, 'unit': 'USD'}
Received price: {'value': 0.45, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117, 'timeStamp': 1603745987.9591947}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117, 'timeStamp': 1603745987.9591947}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117, 'timeStamp': 1603745987.9591947}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870, 'timeStamp': 1603745987.2669718}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117, 'timeStamp': 1603745987.9591947}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117, 'timeStamp': 1603745987.9591947}}]
Last price: 0.45
Remaining time: 295.63948559570315
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.27}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.79}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.83}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.29}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.44}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.36}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117, 'timeStamp': 1603745987.9591947}}
Currency units match
Returning utility: -0.38
Utility received: -0.38
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Reached minMarkupRatio: 1.1842105263157894
My recent offers: []
We've never made a SellOffer before. Going to match or propose minMarkup price
Returning bid: {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.45, 'unit': 'USD'}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.45, 'unit': 'USD'}}
Received confirm: False
bid is a minMarkup
min offer was made by other agent
Going to match other agent's offer
Returning response: I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.
Returning bidResponse: {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.45, 'unit': 'USD'}}}
Bid message from processMessage: {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.45, 'unit': 'USD'}}}
Sending message: {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.45, 'unit': 'USD'}}}
Sending message to orchestrator: {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.45, 'unit': 'USD'}}}
Entering receiveMessage
Remaining Time: 295.56364208984377
Info received: {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086}
This message is from me!
Entering processMessage
Received message: {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.60517897605896}], 'entities': [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.60517897605896}], 'entities': [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.60517897605896}], 'entities': [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.60517897605896}], 'entities': [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.60517897605896}], 'entities': [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.60517897605896}]
entities:  [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [33, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [33, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.45, 'unit': 'USD'}
Received price: {'value': 0.45, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'timeStamp': 1603745988.6764297}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'timeStamp': 1603745988.6764297}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870, 'timeStamp': 1603745987.2669718}}, {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117, 'timeStamp': 1603745987.9591947}}, {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'timeStamp': 1603745988.6764297}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'timeStamp': 1603745988.6764297}}
127.0.0.1 - - [26/Oct/2020 16:59:48] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 279.29185229492185
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746004314}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746004314}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746004314}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746004314}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746004314}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746004314}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9496523857116699}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746004314, 'timeStamp': 1603746005.322311}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746004314, 'timeStamp': 1603746005.322311}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603745985870, 'timeStamp': 1603745987.2669718}}, {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.45 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745987340.2117, 'timeStamp': 1603745987.9591947}}, {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'timeStamp': 1603745988.6764297}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'timeStamp': 1603745988.6764297}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.45 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603745988001.086, 'timeStamp': 1603745988.6764297}}
Sending bid to translate: {'price': {'value': 0.45, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.45, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: Perfect! Just to confirm, I'm giving you
Returning response: Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.
Clearing bidHistory
Returning message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024, 'bid': {'price': {'value': 0.45, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024, 'bid': {'price': {'value': 0.45, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024, 'bid': {'price': {'value': 0.45, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024, 'bid': {'price': {'value': 0.45, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 278.205625
Info received: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024}
This message is from me!
Entering processMessage
Received message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.451215055538313}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.451215055538313}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.451215055538313}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.451215055538313}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.451215055538313}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.451215055538313}]
entities:  [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.45, 'unit': 'USD'}
Received price: {'value': 0.45, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024, 'timeStamp': 1603746006.1798885}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024, 'timeStamp': 1603746006.1798885}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': None}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.45 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746005326.024, 'timeStamp': 1603746006.1798885}}
127.0.0.1 - - [26/Oct/2020 17:00:06] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 242.05349780273437
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I want 3 eggs', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.2564924607786452}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.2564924607786452}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'egg': 3}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549, 'timeStamp': 1603746042.1873326}}
Received interpretation: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549, 'timeStamp': 1603746042.1873326}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549, 'timeStamp': 1603746042.1873326}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549, 'timeStamp': 1603746042.1873326}}
127.0.0.1 - - [26/Oct/2020 17:00:42] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 241.3706188964844
Info received: {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334}
Entering processMessage
Received message: {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.45668360394046204}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 18], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [29, 33], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [29, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.45668360394046204}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 18], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [29, 33], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [29, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334}
Returning Watson response: {'intents': [{'intent': 'MinOffer', 'confidence': 0.45668360394046204}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 18], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [29, 33], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [29, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'MinOffer', 'confidence': 0.45668360394046204}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 18], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [29, 33], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [29, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'MinOffer', 'confidence': 0.45668360394046204}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 18], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [29, 33], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [29, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'MinOffer', 'confidence': 0.45668360394046204}]
entities:  [{'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 18], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [29, 33], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [29, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 18], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [29, 33], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [29, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [29, 33], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [29, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [29, 33], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45}, 'interpretation': {'numeric_value': 0.45, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [29, 37], 'value': '0.45', 'confidence': 1, 'metadata': {'numeric_value': 0.45, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.45, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.45, 'unit': 'USD'}
Received price: {'value': 0.45, 'unit': 'USD'}
Returning offer: {'quantity': {'egg': 3}, 'price': {'value': 0.45, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'egg': 3}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334, 'timeStamp': 1603746042.794408}}
Received interpretation: {'quantity': {'egg': 3}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334, 'timeStamp': 1603746042.794408}}
Message from another seller. Need to make an offer!
Message type: MinOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'egg': 3}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334, 'timeStamp': 1603746042.794408}}
BidBlock: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746041549, 'timeStamp': 1603746042.1873326}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'egg': 3}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334, 'timeStamp': 1603746042.794408}}
BidBlock['type']: MinOffer
Recent offers: []
Last price: None
Remaining time: 240.81325341796875
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.27}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.79}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.83}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.29}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.44}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.36}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'egg': 3}, 'price': {'value': 0.45, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 3 egg stands at 0.45 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042221.334, 'timeStamp': 1603746042.794408}}
Currency units match
Returning utility: -0.36000000000000004
Utility received: -0.36000000000000004
Buyer did not propose price or other agent made an offer. Going to generate price
No history of any SellOffers. Going to propose price
Going to markup price by 2.4427676838750285
Entering quantize
Received quantity: 0.5193963661950103
Received decimals: 2
Returning value: 0.52
Returning bid: {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}
Entering translateBid
Received bid: {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 3 egg for 0.52 USD.
Returning bidResponse: {'text': 'How about if I sell you 3 egg for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042821.3384, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Bid message from processMessage: {'text': 'How about if I sell you 3 egg for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042821.3384, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Sending message: {'text': 'How about if I sell you 3 egg for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042821.3384, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Sending message to orchestrator: {'text': 'How about if I sell you 3 egg for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042821.3384, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Entering receiveRejection
Remaining Time: 240.76631762695314
Info received: {'text': 'How about if I sell you 3 egg for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042821.3384, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}, 'rationale': 'Premature response from unaddressed agent'}
Received message: {'text': 'How about if I sell you 3 egg for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042821.3384, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}, 'rationale': 'Premature response from unaddressed agent'}
Returning response: {'status': 'Acknowledged', 'message': {'text': 'How about if I sell you 3 egg for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746042821.3384, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}, 'rationale': 'Premature response from unaddressed agent'}}
127.0.0.1 - - [26/Oct/2020 17:00:42] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
[2020-10-26 17:01:48,027] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 862, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 874, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:01:48] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
[2020-10-26 17:02:05,373] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 862, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 874, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:02:05] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
[2020-10-26 17:02:42,843] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 862, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 874, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:02:42] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
Entering endRound
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 17:04:43] "[37mPOST /endRound HTTP/1.1[0m" 200 -
Terminate batch job (Y/N)?
^C
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>run_agent002.cmd

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.41}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.98}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.82}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.3}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.31}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.4}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.41}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.98}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.82}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.3}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.31}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.4}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 17:05:34] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T21:05:39.152Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 17:05:39] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 296.59960595703126
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3791877427488316}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.3791877427488316}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561, 'timeStamp': 1603746344.274454}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561, 'timeStamp': 1603746344.274454}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561, 'timeStamp': 1603746344.274454}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561, 'timeStamp': 1603746344.274454}}
127.0.0.1 - - [26/Oct/2020 17:05:44] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 294.8009147949219
Info received: {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.67 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.883198118209839}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67}, 'interpretation': {'numeric_value': 0.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.883198118209839}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67}, 'interpretation': {'numeric_value': 0.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.883198118209839}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67}, 'interpretation': {'numeric_value': 0.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.883198118209839}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67}, 'interpretation': {'numeric_value': 0.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.883198118209839}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67}, 'interpretation': {'numeric_value': 0.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.883198118209839}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67}, 'interpretation': {'numeric_value': 0.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.67, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67}, 'interpretation': {'numeric_value': 0.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.67, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67}, 'interpretation': {'numeric_value': 0.67, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.67, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67}, 'interpretation': {'numeric_value': 0.67, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.67', 'confidence': 1, 'metadata': {'numeric_value': 0.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.67, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.67, 'unit': 'USD'}
Received price: {'value': 0.67, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.67, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195, 'timeStamp': 1603746345.2354674}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195, 'timeStamp': 1603746345.2354674}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195, 'timeStamp': 1603746345.2354674}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561, 'timeStamp': 1603746344.274454}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195, 'timeStamp': 1603746345.2354674}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195, 'timeStamp': 1603746345.2354674}}]
Last price: 0.67
Remaining time: 293.9209228515625
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.41}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.98}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.82}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.3}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.31}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.4}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195, 'timeStamp': 1603746345.2354674}}
Currency units match
Returning utility: -0.3
Utility received: -0.3
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 1.2333333333333334
Going to markup price by 3.027972192596285
Entering quantize
Received quantity: 0.6083916577788854
Received decimals: 2
Returning value: 0.61
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.61 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.61}}}
Entering receiveMessage
Remaining Time: 293.869955078125
Info received: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.61 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8960153579711914}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8960153579711914}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8960153579711914}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8960153579711914}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8960153579711914}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8960153579711914}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.61, 'unit': 'USD'}
Received price: {'value': 0.61, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'timeStamp': 1603746346.0552306}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'timeStamp': 1603746346.0552306}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561, 'timeStamp': 1603746344.274454}}, {'quantity': {'milk': 1}, 'price': {'value': 0.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195, 'timeStamp': 1603746345.2354674}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'timeStamp': 1603746346.0552306}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'timeStamp': 1603746346.0552306}}
127.0.0.1 - - [26/Oct/2020 17:05:46] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195, 'timeStamp': 1603746345.2354674}}
127.0.0.1 - - [26/Oct/2020 17:05:46] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 285.0254812011719
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354134}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354134}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9515341758728029}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9515341758728029}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354134}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9515341758728029}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354134}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9515341758728029}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354134}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9515341758728029}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354134}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9515341758728029}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354134, 'timeStamp': 1603746354.8071086}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354134, 'timeStamp': 1603746354.8071086}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746342561, 'timeStamp': 1603746344.274454}}, {'quantity': {'milk': 1}, 'price': {'value': 0.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746344321.7195, 'timeStamp': 1603746345.2354674}}, {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'timeStamp': 1603746346.0552306}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'timeStamp': 1603746346.0552306}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746345270.9941, 'timeStamp': 1603746346.0552306}}
Sending bid to translate: {'price': {'value': 0.61, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.61, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: Perfect! Just to confirm, I'm giving you
Returning response: Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.
Clearing bidHistory
Returning message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443, 'bid': {'price': {'value': 0.61, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443, 'bid': {'price': {'value': 0.61, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443, 'bid': {'price': {'value': 0.61, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443, 'bid': {'price': {'value': 0.61, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 284.29010546875
Info received: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443}
This message is from me!
Entering processMessage
Received message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.42808647194084415}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.42808647194084415}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.42808647194084415}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.42808647194084415}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.42808647194084415}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.42808647194084415}]
entities:  [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61}, 'interpretation': {'numeric_value': 0.61, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.61', 'confidence': 1, 'metadata': {'numeric_value': 0.61, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.61, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.61, 'unit': 'USD'}
Received price: {'value': 0.61, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443, 'timeStamp': 1603746355.659591}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.61, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443, 'timeStamp': 1603746355.659591}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': None}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.61 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746354813.4443, 'timeStamp': 1603746355.659591}}
127.0.0.1 - - [26/Oct/2020 17:05:55] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
^CTerminate batch job (Y/N)?
^C
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>run_agent002.cmd

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.37}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.52}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.58}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.23}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.32}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.21}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.37}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.52}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.58}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.23}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.32}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.21}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 17:08:06] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T21:08:11.137Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 17:08:11] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 298.1432951660156
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Entering receiveMessage
Remaining Time: 296.86260302734377
Info received: {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.69 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.34145033211568715}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010, 'timeStamp': 1603746494.7822974}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010, 'timeStamp': 1603746494.7822974}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010, 'timeStamp': 1603746494.7822974}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010, 'timeStamp': 1603746494.7822974}}
127.0.0.1 - - [26/Oct/2020 17:08:14] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9189444065093995}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69}, 'interpretation': {'numeric_value': 0.69, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.69, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9189444065093995}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69}, 'interpretation': {'numeric_value': 0.69, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.69, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.9189444065093995}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69}, 'interpretation': {'numeric_value': 0.69, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.69, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.9189444065093995}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69}, 'interpretation': {'numeric_value': 0.69, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.69, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.9189444065093995}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69}, 'interpretation': {'numeric_value': 0.69, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.69, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.9189444065093995}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69}, 'interpretation': {'numeric_value': 0.69, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.69, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69}, 'interpretation': {'numeric_value': 0.69, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.69, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69}, 'interpretation': {'numeric_value': 0.69, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.69, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69}, 'interpretation': {'numeric_value': 0.69, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.69', 'confidence': 1, 'metadata': {'numeric_value': 0.69, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.69, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.69, 'unit': 'USD'}
Received price: {'value': 0.69, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.69, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.69, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016, 'timeStamp': 1603746494.9065936}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.69, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016, 'timeStamp': 1603746494.9065936}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.69, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016, 'timeStamp': 1603746494.9065936}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746493010, 'timeStamp': 1603746494.7822974}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.69, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016, 'timeStamp': 1603746494.9065936}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.69, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016, 'timeStamp': 1603746494.9065936}}]
Last price: 0.69
Remaining time: 296.2555407714844
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.37}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.52}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.58}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.38}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.23}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.32}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.21}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.69, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.69 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494272.4016, 'timeStamp': 1603746494.9065936}}
Currency units match
Returning utility: -0.38
Utility received: -0.38
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 0.8157894736842106
Going to markup price by 2.643783801193494
Entering quantize
Received quantity: 0.6246378444535278
Received decimals: 2
Returning value: 0.62
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.62}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.62}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.62 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.62 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494911.232, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.62}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.62 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494911.232, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.62}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.62 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494911.232, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.62}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.62 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494911.232, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.62}}}
Entering receiveRejection
Remaining Time: 296.2454296875
Info received: {'text': 'How about if I sell you 1 milk for 0.62 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494911.232, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.62}}, 'rationale': 'Premature response from unaddressed agent'}
Received message: {'text': 'How about if I sell you 1 milk for 0.62 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494911.232, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.62}}, 'rationale': 'Premature response from unaddressed agent'}
Returning response: {'status': 'Acknowledged', 'message': {'text': 'How about if I sell you 1 milk for 0.62 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746494911.232, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.62}}, 'rationale': 'Premature response from unaddressed agent'}}
127.0.0.1 - - [26/Oct/2020 17:08:14] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.33}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.69}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.81}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.37}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.39}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.48}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.23}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.33}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.69}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.81}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.37}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.39}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.48}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.23}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 17:08:25] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
^CTerminate batch job (Y/N)?
^C
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>run_agent002.cmd

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.34}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.69}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.76}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.28}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.36}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.37}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.3}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.34}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.69}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.76}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.28}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.36}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.37}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.3}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 17:10:50] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T21:10:55.660Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 17:10:55] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 299.09579150390624
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.34145033211568715}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568, 'timeStamp': 1603746658.1734214}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568, 'timeStamp': 1603746658.1734214}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568, 'timeStamp': 1603746658.1734214}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568, 'timeStamp': 1603746658.1734214}}
127.0.0.1 - - [26/Oct/2020 17:10:58] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 297.4835837402344
Info received: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.52 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9272618293762207}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9272618293762207}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.9272618293762207}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.9272618293762207}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.9272618293762207}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.9272618293762207}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.52, 'unit': 'USD'}
Received price: {'value': 0.52, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753, 'timeStamp': 1603746658.8822942}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753, 'timeStamp': 1603746658.8822942}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753, 'timeStamp': 1603746658.8822942}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568, 'timeStamp': 1603746658.1734214}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753, 'timeStamp': 1603746658.8822942}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753, 'timeStamp': 1603746658.8822942}}]
Last price: 0.52
Remaining time: 296.7808259277344
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.34}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.69}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.76}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.28}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.36}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.37}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.3}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753, 'timeStamp': 1603746658.8822942}}
Currency units match
Returning utility: -0.28
Utility received: -0.28
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 0.8571428571428568
Going to markup price by 2.7039640956020894
Entering quantize
Received quantity: 0.4771099467685851
Received decimals: 2
Returning value: 0.48
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.48}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.48}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.48 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.48}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.48}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.48}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.48}}}
Entering receiveMessage
Remaining Time: 296.7055185546875
Info received: {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.48 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9239259243011475}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9239259243011475}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.9239259243011475}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.9239259243011475}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.9239259243011475}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.9239259243011475}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.48, 'unit': 'USD'}
Received price: {'value': 0.48, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.48, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.48, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'timeStamp': 1603746659.705186}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.48, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'timeStamp': 1603746659.705186}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568, 'timeStamp': 1603746658.1734214}}, {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753, 'timeStamp': 1603746658.8822942}}, {'quantity': {'milk': 1}, 'price': {'value': 0.48, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'timeStamp': 1603746659.705186}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'timeStamp': 1603746659.705186}}
127.0.0.1 - - [26/Oct/2020 17:10:59] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753, 'timeStamp': 1603746658.8822942}}
127.0.0.1 - - [26/Oct/2020 17:10:59] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 292.02105712890625
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746663643}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746663643}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746663643}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746663643}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746663643}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746663643}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746663643, 'timeStamp': 1603746664.257381}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746663643, 'timeStamp': 1603746664.257381}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746656568, 'timeStamp': 1603746658.1734214}}, {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658157.753, 'timeStamp': 1603746658.8822942}}, {'quantity': {'milk': 1}, 'price': {'value': 0.48, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'timeStamp': 1603746659.705186}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.48, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'timeStamp': 1603746659.705186}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.48, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.48 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746658916.5845, 'timeStamp': 1603746659.705186}}
Sending bid to translate: {'price': {'value': 0.48, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.48, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: Perfect! Just to confirm, I'm giving you
Returning response: Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.
Clearing bidHistory
Returning message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274, 'bid': {'price': {'value': 0.48, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274, 'bid': {'price': {'value': 0.48, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274, 'bid': {'price': {'value': 0.48, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274, 'bid': {'price': {'value': 0.48, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 291.3523686523437
Info received: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274}
This message is from me!
Entering processMessage
Received message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8310203552246094}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8310203552246094}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8310203552246094}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8310203552246094}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8310203552246094}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8310203552246094}]
entities:  [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48}, 'interpretation': {'numeric_value': 0.48, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.48', 'confidence': 1, 'metadata': {'numeric_value': 0.48, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.48, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.48, 'unit': 'USD'}
Received price: {'value': 0.48, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.48, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.48, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274, 'timeStamp': 1603746664.8813183}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.48, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274, 'timeStamp': 1603746664.8813183}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': None}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.48 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746664259.3274, 'timeStamp': 1603746664.8813183}}
127.0.0.1 - - [26/Oct/2020 17:11:04] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
[2020-10-26 17:13:04,301] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 865, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 877, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:13:04] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
Terminate batch job (Y/N)?
^C
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>run_agent002.cmd

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.39}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.88}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.83}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.27}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.38}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.42}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.22}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.39}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.88}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.83}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.27}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.38}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.42}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.22}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 17:14:16] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T21:14:21.534Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 17:14:21] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 297.08953784179687
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.34145033211568715}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.34145033211568715}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439, 'timeStamp': 1603746866.0317464}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439, 'timeStamp': 1603746866.0317464}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439, 'timeStamp': 1603746866.0317464}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439, 'timeStamp': 1603746866.0317464}}
127.0.0.1 - - [26/Oct/2020 17:14:26] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 295.4137746582031
Info received: {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.29 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9079730033874511}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9079730033874511}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.9079730033874511}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.9079730033874511}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.9079730033874511}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.9079730033874511}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.29, 'unit': 'USD'}
Received price: {'value': 0.29, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556, 'timeStamp': 1603746866.7156217}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556, 'timeStamp': 1603746866.7156217}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556, 'timeStamp': 1603746866.7156217}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439, 'timeStamp': 1603746866.0317464}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556, 'timeStamp': 1603746866.7156217}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556, 'timeStamp': 1603746866.7156217}}]
Last price: 0.29
Remaining time: 294.80189379882813
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.39}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.88}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.83}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.27}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.38}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.42}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.22}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556, 'timeStamp': 1603746866.7156217}}
Currency units match
Returning utility: -0.27
Utility received: -0.27
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Reached minMarkupRatio: 1.074074074074074
My recent offers: []
We've never made a SellOffer before. Going to match or propose minMarkup price
Returning bid: {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.29, 'unit': 'USD'}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.29, 'unit': 'USD'}}
Received confirm: False
bid is a minMarkup
min offer was made by other agent
Going to match other agent's offer
Returning response: I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.
Returning bidResponse: {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.29, 'unit': 'USD'}}}
Bid message from processMessage: {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.29, 'unit': 'USD'}}}
Sending message: {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.29, 'unit': 'USD'}}}
Sending message to orchestrator: {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'bid': {'quantity': {'milk': 1}, 'type': 'MinMarkup', 'speaker': 'Watson', 'action': 'match', 'price': {'value': 0.29, 'unit': 'USD'}}}
Entering receiveMessage
Remaining Time: 294.729283203125
Info received: {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423}
This message is from me!
Entering processMessage
Received message: {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.5987787961959838}], 'entities': [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.5987787961959838}], 'entities': [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.5987787961959838}], 'entities': [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.5987787961959838}], 'entities': [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.5987787961959838}], 'entities': [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.5987787961959838}]
entities:  [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [22, 23], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [24, 28], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [33, 37], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [33, 37], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [33, 37], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [33, 41], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.29, 'unit': 'USD'}
Received price: {'value': 0.29, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'timeStamp': 1603746867.4018865}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'timeStamp': 1603746867.4018865}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439, 'timeStamp': 1603746866.0317464}}, {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556, 'timeStamp': 1603746866.7156217}}, {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'timeStamp': 1603746867.4018865}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'timeStamp': 1603746867.4018865}}
127.0.0.1 - - [26/Oct/2020 17:14:27] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 287.8754519042969
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746873653}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746873653}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746873653}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746873653}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746873653}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746873653}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9533688068389894}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746873653, 'timeStamp': 1603746874.2889907}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746873653, 'timeStamp': 1603746874.2889907}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603746864439, 'timeStamp': 1603746866.0317464}}, {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.29 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866082.9556, 'timeStamp': 1603746866.7156217}}, {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'timeStamp': 1603746867.4018865}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'timeStamp': 1603746867.4018865}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'I will also offer you 1 milk for 0.29 USD. Our products are organic and Non-GMO.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746866769.3423, 'timeStamp': 1603746867.4018865}}
Sending bid to translate: {'price': {'value': 0.29, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.29, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: Perfect! Just to confirm, I'm giving you
Returning response: Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.
Clearing bidHistory
Returning message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722, 'bid': {'price': {'value': 0.29, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722, 'bid': {'price': {'value': 0.29, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722, 'bid': {'price': {'value': 0.29, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722, 'bid': {'price': {'value': 0.29, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 287.19244946289064
Info received: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722}
This message is from me!
Entering processMessage
Received message: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8256857395172119}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8256857395172119}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8256857395172119}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8256857395172119}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8256857395172119}], 'entities': [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8256857395172119}]
entities:  [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [42, 43], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [44, 48], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [53, 57], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [53, 57], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29}, 'interpretation': {'numeric_value': 0.29, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [53, 61], 'value': '0.29', 'confidence': 1, 'metadata': {'numeric_value': 0.29, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.29, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.29, 'unit': 'USD'}
Received price: {'value': 0.29, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722, 'timeStamp': 1603746874.8789651}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.29, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722, 'timeStamp': 1603746874.8789651}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': None}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "Perfect! Just to confirm, I'm giving you  1 milk for 0.29 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603746874293.9722, 'timeStamp': 1603746874.8789651}}
127.0.0.1 - - [26/Oct/2020 17:14:34] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
[2020-10-26 17:16:26,791] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 864, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 876, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:16:26] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
[2020-10-26 17:16:34,326] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 864, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 876, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:16:34] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
^CTerminate batch job (Y/N)?
^C
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>run_agent002.cmd

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.93}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.56}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.32}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.26}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.2}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.93}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.56}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.32}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.26}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.2}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 17:17:15] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T21:17:20.204Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 17:17:20] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 297.99316235351563
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.357595109550013}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.357595109550013}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.357595109550013}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.357595109550013}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.357595109550013}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.357595109550013}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196, 'timeStamp': 1603747043.812935}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196, 'timeStamp': 1603747043.812935}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196, 'timeStamp': 1603747043.812935}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196, 'timeStamp': 1603747043.812935}}
127.0.0.1 - - [26/Oct/2020 17:17:23] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 296.3541350097656
Info received: {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.57 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8852728843688966}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8852728843688966}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8852728843688966}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8852728843688966}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8852728843688966}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8852728843688966}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57}, 'interpretation': {'numeric_value': 0.57, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.57', 'confidence': 1, 'metadata': {'numeric_value': 0.57, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.57, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.57, 'unit': 'USD'}
Received price: {'value': 0.57, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015, 'timeStamp': 1603747044.522335}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015, 'timeStamp': 1603747044.522335}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015, 'timeStamp': 1603747044.522335}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196, 'timeStamp': 1603747043.812935}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015, 'timeStamp': 1603747044.522335}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015, 'timeStamp': 1603747044.522335}}]
Last price: 0.57
Remaining time: 295.67066674804687
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.44}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.93}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.56}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.32}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.26}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.2}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015, 'timeStamp': 1603747044.522335}}
Currency units match
Returning utility: -0.32
Utility received: -0.32
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 0.78125
Going to markup price by 2.6262974186148536
Entering quantize
Received quantity: 0.5204151739567532
Received decimals: 2
Returning value: 0.52
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.52 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.52}}}
Entering receiveMessage
Remaining Time: 295.5913510742188
Info received: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.52 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8867886066436768}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8867886066436768}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8867886066436768}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8867886066436768}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8867886066436768}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8867886066436768}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.52, 'unit': 'USD'}
Received price: {'value': 0.52, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'timeStamp': 1603747045.1643462}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'timeStamp': 1603747045.1643462}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196, 'timeStamp': 1603747043.812935}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015, 'timeStamp': 1603747044.522335}}, {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'timeStamp': 1603747045.1643462}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'timeStamp': 1603747045.1643462}}
127.0.0.1 - - [26/Oct/2020 17:17:25] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 289.7482634277344
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747050450}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747050450}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533157825469971}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533157825469971}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747050450}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533157825469971}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747050450}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533157825469971}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747050450}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9533157825469971}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747050450}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9533157825469971}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747050450, 'timeStamp': 1603747051.1359434}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747050450, 'timeStamp': 1603747051.1359434}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747042196, 'timeStamp': 1603747043.812935}}, {'quantity': {'milk': 1}, 'price': {'value': 0.57, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.57 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747043813.8015, 'timeStamp': 1603747044.522335}}, {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'timeStamp': 1603747045.1643462}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'timeStamp': 1603747045.1643462}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747044562.6038, 'timeStamp': 1603747045.1643462}}
Sending bid to translate: {'price': {'value': 0.52, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.52, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: I'm so glad! This is to confirm that I'll give you
Returning response: I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.
Clearing bidHistory
Returning message: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368, 'bid': {'price': {'value': 0.52, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368, 'bid': {'price': {'value': 0.52, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368, 'bid': {'price': {'value': 0.52, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368, 'bid': {'price': {'value': 0.52, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 289.0046701660156
Info received: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368}
This message is from me!
Entering processMessage
Received message: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.256218400170701}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.256218400170701}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.256218400170701}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.256218400170701}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.256218400170701}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.256218400170701}]
entities:  [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [51, 52], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 57], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [62, 66], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [62, 66], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [62, 66], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [62, 70], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.52, 'unit': 'USD'}
Received price: {'value': 0.52, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368, 'timeStamp': 1603747051.8674133}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368, 'timeStamp': 1603747051.8674133}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': None}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "I'm so glad! This is to confirm that I'll give you 1 milk for 0.52 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747051138.9368, 'timeStamp': 1603747051.8674133}}
127.0.0.1 - - [26/Oct/2020 17:17:31] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
[2020-10-26 17:19:24,593] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 864, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 876, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:19:24] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
[2020-10-26 17:19:31,175] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 864, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 876, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:19:31] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
Terminate batch job (Y/N)?
^C
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>run_agent002.cmd

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.26}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.95}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.23}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.31}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.49}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.21}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.26}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.95}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.23}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.31}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.49}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.21}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 17:22:34] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T21:22:39.846Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 17:22:39] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 297.5771911621094
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'watson i want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3573105078641902}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3573105078641902}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.3573105078641902}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.3573105078641902}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3573105078641902}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.3573105078641902}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287, 'timeStamp': 1603747363.8475447}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287, 'timeStamp': 1603747363.8475447}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287, 'timeStamp': 1603747363.8475447}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287, 'timeStamp': 1603747363.8475447}}
127.0.0.1 - - [26/Oct/2020 17:22:43] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 295.9991125488281
Info received: {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.35 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8705018043518067}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35}, 'interpretation': {'numeric_value': 0.35, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.35, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8705018043518067}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35}, 'interpretation': {'numeric_value': 0.35, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.35, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8705018043518067}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35}, 'interpretation': {'numeric_value': 0.35, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.35, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8705018043518067}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35}, 'interpretation': {'numeric_value': 0.35, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.35, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8705018043518067}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35}, 'interpretation': {'numeric_value': 0.35, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.35, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8705018043518067}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35}, 'interpretation': {'numeric_value': 0.35, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.35, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35}, 'interpretation': {'numeric_value': 0.35, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.35, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35}, 'interpretation': {'numeric_value': 0.35, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.35, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35}, 'interpretation': {'numeric_value': 0.35, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.35', 'confidence': 1, 'metadata': {'numeric_value': 0.35, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.35, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.35, 'unit': 'USD'}
Received price: {'value': 0.35, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.35, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.35, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096, 'timeStamp': 1603747364.6304843}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.35, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096, 'timeStamp': 1603747364.6304843}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.35, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096, 'timeStamp': 1603747364.6304843}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287, 'timeStamp': 1603747363.8475447}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.35, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096, 'timeStamp': 1603747364.6304843}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.35, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096, 'timeStamp': 1603747364.6304843}}]
Last price: 0.35
Remaining time: 295.22630078125
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.26}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.89}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.95}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.23}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.31}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.49}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.21}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.35, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096, 'timeStamp': 1603747364.6304843}}
Currency units match
Returning utility: -0.23
Utility received: -0.23
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 0.5217391304347823
Going to markup price by 2.453941420667284
Entering quantize
Received quantity: 0.3344065267534753
Received decimals: 2
Returning value: 0.33
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.33}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.33}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.33 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.33}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.33}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.33}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.33}}}
Entering receiveMessage
Remaining Time: 295.1672587890625
Info received: {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.33 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8762879371643066}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8762879371643066}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8762879371643066}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8762879371643066}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8762879371643066}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8762879371643066}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.33, 'unit': 'USD'}
Received price: {'value': 0.33, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.33, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.33, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'timeStamp': 1603747365.3001945}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.33, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'timeStamp': 1603747365.3001945}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287, 'timeStamp': 1603747363.8475447}}, {'quantity': {'milk': 1}, 'price': {'value': 0.35, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096, 'timeStamp': 1603747364.6304843}}, {'quantity': {'milk': 1}, 'price': {'value': 0.33, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'timeStamp': 1603747365.3001945}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'timeStamp': 1603747365.3001945}}
127.0.0.1 - - [26/Oct/2020 17:22:45] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 290.25744995117185
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747369607}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747369607}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9505021572113037}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9505021572113037}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747369607}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9505021572113037}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747369607}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9505021572113037}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747369607}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9505021572113037}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747369607}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9505021572113037}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747369607, 'timeStamp': 1603747370.5027297}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747369607, 'timeStamp': 1603747370.5027297}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson i want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747362287, 'timeStamp': 1603747363.8475447}}, {'quantity': {'milk': 1}, 'price': {'value': 0.35, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.35 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747363815.6096, 'timeStamp': 1603747364.6304843}}, {'quantity': {'milk': 1}, 'price': {'value': 0.33, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'timeStamp': 1603747365.3001945}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.33, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'timeStamp': 1603747365.3001945}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.33, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.33 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747364674.9734, 'timeStamp': 1603747365.3001945}}
Sending bid to translate: {'price': {'value': 0.33, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.33, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: I confirm that I'm selling you
Returning response: I confirm that I'm selling you 1 milk for 0.33 USD.
Clearing bidHistory
Returning message: {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433, 'bid': {'price': {'value': 0.33, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433, 'bid': {'price': {'value': 0.33, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433, 'bid': {'price': {'value': 0.33, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433, 'bid': {'price': {'value': 0.33, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 289.30209521484375
Info received: {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433}
This message is from me!
Entering processMessage
Received message: {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.7783530712127686}], 'entities': [{'entity': 'sys-number', 'location': [31, 32], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 37], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [42, 46], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [42, 50], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.7783530712127686}], 'entities': [{'entity': 'sys-number', 'location': [31, 32], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 37], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [42, 46], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [42, 50], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.7783530712127686}], 'entities': [{'entity': 'sys-number', 'location': [31, 32], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 37], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [42, 46], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [42, 50], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.7783530712127686}], 'entities': [{'entity': 'sys-number', 'location': [31, 32], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 37], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [42, 46], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [42, 50], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.7783530712127686}], 'entities': [{'entity': 'sys-number', 'location': [31, 32], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 37], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [42, 46], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [42, 50], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.7783530712127686}]
entities:  [{'entity': 'sys-number', 'location': [31, 32], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 37], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [42, 46], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [42, 50], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [31, 32], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 37], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [42, 46], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [42, 50], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [42, 46], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [42, 50], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [42, 46], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33}, 'interpretation': {'numeric_value': 0.33, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [42, 50], 'value': '0.33', 'confidence': 1, 'metadata': {'numeric_value': 0.33, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.33, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.33, 'unit': 'USD'}
Received price: {'value': 0.33, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.33, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.33, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433, 'timeStamp': 1603747371.222397}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.33, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433, 'timeStamp': 1603747371.222397}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': None}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "I confirm that I'm selling you 1 milk for 0.33 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747370505.6433, 'timeStamp': 1603747371.222397}}
127.0.0.1 - - [26/Oct/2020 17:22:51] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 230.6236330566406
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747429242}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747429242}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I want 3 eggs', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747429242}
Returning Watson response: {'intents': [], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747429242}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747429242}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747429242}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  []
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 20], 'value': 'egg', 'confidence': 1}]
[2020-10-26 17:23:49,908] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 167, in receiveMessage
    bidMessage = processMessage(message)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 586, in processMessage
    interpretation = extract_bid.interpretMessage(classification)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\extract-bid.py", line 20, in interpretMessage
    if intents[0]['intent'] == "Offer" and intents[0]['confidence'] > 0.2:
IndexError: list index out of range
127.0.0.1 - - [26/Oct/2020 17:23:49] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
Entering receiveMessage
[2020-10-26 17:24:44,694] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 864, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 876, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Entering receiveMessage
127.0.0.1 - - [26/Oct/2020 17:27:37] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
Remaining Time: 1.98669189453125
[2020-10-26 17:24:50,540] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 864, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 876, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Remaining Time: 1.939101806640625
127.0.0.1 - - [26/Oct/2020 17:27:37] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747478763}
Info received: {'text': "My offer for 3 egg stands at 0.33 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747479418.074}
Entering processMessage
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747478763}
Received message: {'text': "My offer for 3 egg stands at 0.33 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747479418.074}
Entering classifyMessage
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'watson I want to buy 3 eggs', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "My offer for 3 egg stands at 0.33 USD. That's the best I can do. You won't find a better deal out there!", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
^CTerminate batch job (Y/N)?
^C
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>
C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>run_agent002.cmd

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>set FLASK_APP=agent-py.py

C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.35}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.88}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.64}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.25}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.33}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.35}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.88}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.64}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.25}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.33}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 17:28:10] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T21:28:15.865Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 17:28:15] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 299.17225927734376
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.34270237464085085}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.34270237464085085}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.34270237464085085}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.34270237464085085}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.34270237464085085}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.34270237464085085}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696, 'timeStamp': 1603747698.5092561}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696, 'timeStamp': 1603747698.5092561}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696, 'timeStamp': 1603747698.5092561}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696, 'timeStamp': 1603747698.5092561}}
127.0.0.1 - - [26/Oct/2020 17:28:18] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 297.3027705078125
Info received: {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.43 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8499009132385253}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43}, 'interpretation': {'numeric_value': 0.43, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.43, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8499009132385253}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43}, 'interpretation': {'numeric_value': 0.43, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.43, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8499009132385253}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43}, 'interpretation': {'numeric_value': 0.43, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.43, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8499009132385253}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43}, 'interpretation': {'numeric_value': 0.43, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.43, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8499009132385253}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43}, 'interpretation': {'numeric_value': 0.43, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.43, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8499009132385253}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43}, 'interpretation': {'numeric_value': 0.43, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.43, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43}, 'interpretation': {'numeric_value': 0.43, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.43, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43}, 'interpretation': {'numeric_value': 0.43, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.43, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43}, 'interpretation': {'numeric_value': 0.43, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.43', 'confidence': 1, 'metadata': {'numeric_value': 0.43, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.43, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.43, 'unit': 'USD'}
Received price: {'value': 0.43, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.43, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.43, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436, 'timeStamp': 1603747699.190693}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.43, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436, 'timeStamp': 1603747699.190693}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.43, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436, 'timeStamp': 1603747699.190693}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696, 'timeStamp': 1603747698.5092561}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.43, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436, 'timeStamp': 1603747699.190693}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.43, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436, 'timeStamp': 1603747699.190693}}]
Last price: 0.43
Remaining time: 296.6841674804688
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.35}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.88}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.64}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.25}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.33}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.43, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436, 'timeStamp': 1603747699.190693}}
Currency units match
Returning utility: -0.25
Utility received: -0.25
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 0.7199999999999998
Going to markup price by 2.6169135818117857
Entering quantize
Received quantity: 0.4042283954529464
Received decimals: 2
Returning value: 0.4
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.4}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.4}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.4 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.4}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.4}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.4}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.4}}}
Entering receiveMessage
Remaining Time: 296.6721943359375
Info received: {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.4 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8879232406616211}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8879232406616211}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8879232406616211}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8879232406616211}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8879232406616211}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8879232406616211}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 38], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 38], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.4, 'unit': 'USD'}
Received price: {'value': 0.4, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.4, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.4, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'timeStamp': 1603747699.6572502}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.4, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'timeStamp': 1603747699.6572502}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696, 'timeStamp': 1603747698.5092561}}, {'quantity': {'milk': 1}, 'price': {'value': 0.43, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436, 'timeStamp': 1603747699.190693}}, {'quantity': {'milk': 1}, 'price': {'value': 0.4, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'timeStamp': 1603747699.6572502}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'timeStamp': 1603747699.6572502}}
127.0.0.1 - - [26/Oct/2020 17:28:19] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 291.492123046875
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704380}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704380}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704380}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704380}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704380}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704380}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704380, 'timeStamp': 1603747704.9229755}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704380, 'timeStamp': 1603747704.9229755}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747696696, 'timeStamp': 1603747698.5092561}}, {'quantity': {'milk': 1}, 'price': {'value': 0.43, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.43 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747698549.1436, 'timeStamp': 1603747699.190693}}, {'quantity': {'milk': 1}, 'price': {'value': 0.4, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'timeStamp': 1603747699.6572502}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.4, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'timeStamp': 1603747699.6572502}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.4, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.4 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747699195.6794, 'timeStamp': 1603747699.6572502}}
Sending bid to translate: {'price': {'value': 0.4, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.4, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: Perfect! Just to confirm, I'm giving you
Returning response: Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.
Clearing bidHistory
Returning message: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753, 'bid': {'price': {'value': 0.4, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753, 'bid': {'price': {'value': 0.4, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753, 'bid': {'price': {'value': 0.4, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753, 'bid': {'price': {'value': 0.4, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 290.93691918945314
Info received: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753}
This message is from me!
Entering processMessage
Received message: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.7115671634674072}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.7115671634674072}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.7115671634674072}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.7115671634674072}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.7115671634674072}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.7115671634674072}]
entities:  [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4}, 'interpretation': {'numeric_value': 0.4, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.4', 'confidence': 1, 'metadata': {'numeric_value': 0.4, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.4, 'unit': 'USD'}}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753, 'timeStamp': 1603747705.7047825}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753, 'timeStamp': 1603747705.7047825}}
Received own message
We accepted/rejected offer. Clearing bidHistory
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.4 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704923.9753, 'timeStamp': 1603747705.7047825}}
127.0.0.1 - - [26/Oct/2020 17:28:25] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747704380, 'timeStamp': 1603747704.9229755}}
127.0.0.1 - - [26/Oct/2020 17:28:25] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 247.55305395507813
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'watson I want to buy 3 eggs', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Entering receiveMessage
Remaining Time: 246.5775012207031
Info received: {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687}
Entering processMessage
Received message: {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 3 egg for 1.74 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3091480258068828}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 27], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3091480258068828}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 27], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.3091480258068828}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 27], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.3091480258068828}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 27], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3091480258068828}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 27], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.3091480258068828}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 27], 'value': 'egg', 'confidence': 1}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 27], 'value': 'egg', 'confidence': 1}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'egg': 3}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313, 'timeStamp': 1603747749.3232834}}
Received interpretation: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313, 'timeStamp': 1603747749.3232834}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313, 'timeStamp': 1603747749.3232834}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313, 'timeStamp': 1603747749.3232834}}
127.0.0.1 - - [26/Oct/2020 17:29:09] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8614202976226808}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74}, 'interpretation': {'numeric_value': 1.74, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.74, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8614202976226808}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74}, 'interpretation': {'numeric_value': 1.74, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.74, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8614202976226808}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74}, 'interpretation': {'numeric_value': 1.74, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.74, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8614202976226808}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74}, 'interpretation': {'numeric_value': 1.74, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.74, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8614202976226808}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74}, 'interpretation': {'numeric_value': 1.74, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.74, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8614202976226808}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74}, 'interpretation': {'numeric_value': 1.74, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.74, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74}, 'interpretation': {'numeric_value': 1.74, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.74, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [34, 38], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74}, 'interpretation': {'numeric_value': 1.74, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.74, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [34, 38], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74}, 'interpretation': {'numeric_value': 1.74, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.74', 'confidence': 1, 'metadata': {'numeric_value': 1.74, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.74, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 1.74, 'unit': 'USD'}
Received price: {'value': 1.74, 'unit': 'USD'}
Returning offer: {'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687, 'timeStamp': 1603747749.6920297}}
Received interpretation: {'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687, 'timeStamp': 1603747749.6920297}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687, 'timeStamp': 1603747749.6920297}}
BidBlock: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313, 'timeStamp': 1603747749.3232834}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687, 'timeStamp': 1603747749.6920297}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687, 'timeStamp': 1603747749.6920297}}]
Last price: 1.74
Remaining time: 246.183822265625
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.35}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.88}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.64}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.25}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.33}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687, 'timeStamp': 1603747749.6920297}}
Currency units match
Returning utility: -1.0499999999999998
Utility received: -1.0499999999999998
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 0.6571428571428575
Going to markup price by 2.532940040537501
Entering quantize
Received quantity: 1.6095870425643757
Received decimals: 2
Returning value: 1.61
Returning bid: {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.61}}
Entering translateBid
Received bid: {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.61}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 3 egg for 1.61 USD.
Returning bidResponse: {'text': 'How about if I sell you 3 egg for 1.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749695.022, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.61}}}
Bid message from processMessage: {'text': 'How about if I sell you 3 egg for 1.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749695.022, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.61}}}
Sending message: {'text': 'How about if I sell you 3 egg for 1.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749695.022, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.61}}}
Sending message to orchestrator: {'text': 'How about if I sell you 3 egg for 1.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749695.022, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.61}}}
Entering receiveRejection
Remaining Time: 246.1756103515625
Info received: {'text': 'How about if I sell you 3 egg for 1.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749695.022, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.61}}, 'rationale': 'Premature response from unaddressed agent'}
Received message: {'text': 'How about if I sell you 3 egg for 1.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749695.022, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.61}}, 'rationale': 'Premature response from unaddressed agent'}
Returning response: {'status': 'Acknowledged', 'message': {'text': 'How about if I sell you 3 egg for 1.61 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749695.022, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.61}}, 'rationale': 'Premature response from unaddressed agent'}}
127.0.0.1 - - [26/Oct/2020 17:29:09] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 232.7138720703125
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I want 3 eggs', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3329167275525834}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}, {'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3329167275525834}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}, {'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.3329167275525834}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}, {'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.3329167275525834}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}, {'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3329167275525834}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}, {'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'egg', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.3329167275525834}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}, {'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'egg', 'confidence': 1}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}, {'entity': 'sys-number', 'location': [13, 14], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'egg', 'confidence': 1}]
Found entities: [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'egg': 3}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154, 'timeStamp': 1603747763.8433745}}
Received interpretation: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154, 'timeStamp': 1603747763.8433745}}
Message from buyer to me
Entering mayIRespond
Need to make it so can't respond if just responded and human hasn't responded.             Check history to see if human responded?
Returning reponse: True
Buyer is making an BuyRequest
Entering generateBid
Received offer: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154, 'timeStamp': 1603747763.8433745}}
BidBlock: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313, 'timeStamp': 1603747749.3232834}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687, 'timeStamp': 1603747749.6920297}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154, 'timeStamp': 1603747763.8433745}}
BidBlock['type']: BuyRequest
Recent offers: [{'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687, 'timeStamp': 1603747749.6920297}}]
Last price: 1.74
Remaining time: 232.02948583984374
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.35}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.88}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.64}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.25}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.33}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154, 'timeStamp': 1603747763.8433745}}
no currency units provided
Returning utility: -1.0499999999999998
Utility received: -1.0499999999999998
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 0.6571428571428575
Going to markup price by 2.566301122920834
Entering quantize
Received quantity: 1.6446161790668756
Received decimals: 2
Returning value: 1.64
Returning bid: {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.64}}
Entering translateBid
Received bid: {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.64}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 3 egg for 1.64 USD.
Returning bidResponse: {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.64}}}
Bid message from processMessage: {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.64}}}
Sending message: {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.64}}}
Sending message to orchestrator: {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'bid': {'quantity': {'egg': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 1.64}}}
Entering receiveMessage
Remaining Time: 231.99756567382812
Info received: {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 3 egg for 1.64 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8746769905090332}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8746769905090332}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8746769905090332}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8746769905090332}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8746769905090332}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8746769905090332}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 29], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [34, 38], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [34, 38], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [34, 38], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [34, 42], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 1.64, 'unit': 'USD'}
Received price: {'value': 1.64, 'unit': 'USD'}
Returning offer: {'quantity': {'egg': 3}, 'price': {'value': 1.64, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'egg': 3}, 'price': {'value': 1.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'timeStamp': 1603747764.6055474}}
Received interpretation: {'quantity': {'egg': 3}, 'price': {'value': 1.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'timeStamp': 1603747764.6055474}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313, 'timeStamp': 1603747749.3232834}}, {'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687, 'timeStamp': 1603747749.6920297}}, {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154, 'timeStamp': 1603747763.8433745}}, {'quantity': {'egg': 3}, 'price': {'value': 1.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'timeStamp': 1603747764.6055474}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'timeStamp': 1603747764.6055474}}
127.0.0.1 - - [26/Oct/2020 17:29:24] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 200.44237231445314
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795429}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795429}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795429}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795429}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795429}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795429}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795429, 'timeStamp': 1603747795.9109857}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795429, 'timeStamp': 1603747795.9109857}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'watson I want to buy 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747748313, 'timeStamp': 1603747749.3232834}}, {'quantity': {'egg': 3}, 'price': {'value': 1.74, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.74 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747749291.3687, 'timeStamp': 1603747749.6920297}}, {'quantity': {'egg': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I want 3 eggs', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763154, 'timeStamp': 1603747763.8433745}}, {'quantity': {'egg': 3}, 'price': {'value': 1.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'timeStamp': 1603747764.6055474}}]}
Our SellOffers: [{'quantity': {'egg': 3}, 'price': {'value': 1.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'timeStamp': 1603747764.6055474}}]
acceptedBid: {'quantity': {'egg': 3}, 'price': {'value': 1.64, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 egg for 1.64 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747763864.315, 'timeStamp': 1603747764.6055474}}
Sending bid to translate: {'price': {'value': 1.64, 'unit': 'USD'}, 'quantity': {'egg': 3}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 1.64, 'unit': 'USD'}, 'quantity': {'egg': 3}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: I'm so glad! This is to confirm that I'll give you
Returning response: I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.
Clearing bidHistory
Returning message: {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983, 'bid': {'price': {'value': 1.64, 'unit': 'USD'}, 'quantity': {'egg': 3}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983, 'bid': {'price': {'value': 1.64, 'unit': 'USD'}, 'quantity': {'egg': 3}, 'type': 'Accept'}}
Sending message: {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983, 'bid': {'price': {'value': 1.64, 'unit': 'USD'}, 'quantity': {'egg': 3}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983, 'bid': {'price': {'value': 1.64, 'unit': 'USD'}, 'quantity': {'egg': 3}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 199.95190014648438
Info received: {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983}
This message is from me!
Entering processMessage
Received message: {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.8426128387451173}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 56], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [61, 65], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [61, 69], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.8426128387451173}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 56], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [61, 65], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [61, 69], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.8426128387451173}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 56], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [61, 65], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [61, 69], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.8426128387451173}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 56], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [61, 65], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [61, 69], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.8426128387451173}], 'entities': [{'entity': 'sys-number', 'location': [51, 52], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 56], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [61, 65], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [61, 69], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.8426128387451173}]
entities:  [{'entity': 'sys-number', 'location': [51, 52], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [53, 56], 'value': 'egg', 'confidence': 1}, {'entity': 'sys-number', 'location': [61, 65], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64}, 'interpretation': {'numeric_value': 1.64, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [61, 69], 'value': '1.64', 'confidence': 1, 'metadata': {'numeric_value': 1.64, 'unit': 'USD'}, 'interpretation': {'numeric_value': 1.64, 'unit': 'USD'}}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983, 'timeStamp': 1603747796.34494}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983, 'timeStamp': 1603747796.34494}}
Received own message
We accepted/rejected offer. Clearing bidHistory
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "I'm so glad! This is to confirm that I'll give you 3 egg for 1.64 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795911.983, 'timeStamp': 1603747796.34494}}
127.0.0.1 - - [26/Oct/2020 17:29:56] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747795429, 'timeStamp': 1603747795.9109857}}
127.0.0.1 - - [26/Oct/2020 17:29:56] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
[2020-10-26 17:30:19,199] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 864, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 876, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:30:19] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
Entering receiveMessage
Remaining Time: 171.77715991210937
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I want to buy 3 cups of flour', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.44755554737352554}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 36], 'value': 'flour', 'confidence': 0.92}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.44755554737352554}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 36], 'value': 'flour', 'confidence': 0.92}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.44755554737352554}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 36], 'value': 'flour', 'confidence': 0.92}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.44755554737352554}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 36], 'value': 'flour', 'confidence': 0.92}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.44755554737352554}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 36], 'value': 'flour', 'confidence': 0.92}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.44755554737352554}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 36], 'value': 'flour', 'confidence': 0.92}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [21, 22], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [23, 36], 'value': 'flour', 'confidence': 0.92}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'flour': 3}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'flour': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094, 'timeStamp': 1603747824.680611}}
Received interpretation: {'quantity': {'flour': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094, 'timeStamp': 1603747824.680611}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'flour': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094, 'timeStamp': 1603747824.680611}}]}
Delay, respond or cancel
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094, 'timeStamp': 1603747824.680611}}
127.0.0.1 - - [26/Oct/2020 17:30:24] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 171.09818920898437
Info received: {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263}
Entering processMessage
Received message: {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 3 flour for 4.67 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8648659229278566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 31], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [36, 40], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [36, 44], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8648659229278566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 31], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [36, 40], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [36, 44], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8648659229278566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 31], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [36, 40], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [36, 44], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8648659229278566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 31], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [36, 40], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [36, 44], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8648659229278566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 31], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [36, 40], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [36, 44], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8648659229278566}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 31], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [36, 40], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [36, 44], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 31], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [36, 40], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [36, 44], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [36, 40], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [36, 44], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [36, 40], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [36, 44], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 4.67, 'unit': 'USD'}
Received price: {'value': 4.67, 'unit': 'USD'}
Returning offer: {'quantity': {'flour': 3}, 'price': {'value': 4.67, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'flour': 3}, 'price': {'value': 4.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263, 'timeStamp': 1603747825.2092273}}
Received interpretation: {'quantity': {'flour': 3}, 'price': {'value': 4.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263, 'timeStamp': 1603747825.2092273}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'flour': 3}, 'price': {'value': 4.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263, 'timeStamp': 1603747825.2092273}}
BidBlock: {'quantity': {'flour': 3}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want to buy 3 cups of flour', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824094, 'timeStamp': 1603747824.680611}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'flour': 3}, 'price': {'value': 4.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263, 'timeStamp': 1603747825.2092273}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'flour': 3}, 'price': {'value': 4.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263, 'timeStamp': 1603747825.2092273}}]
Last price: 4.67
Remaining time: 170.66762158203124
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.35}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.88}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.64}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.25}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.3}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.33}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'flour': 3}, 'price': {'value': 4.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 3 flour for 4.67 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747824754.7263, 'timeStamp': 1603747825.2092273}}
Currency units match
Returning utility: -2.64
Utility received: -2.64
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 0.7689393939393936
Going to markup price by 2.6248378408095423
Entering quantize
Received quantity: 4.289571899737192
Received decimals: 2
Returning value: 4.29
Returning bid: {'quantity': {'flour': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 4.29}}
Entering translateBid
Received bid: {'quantity': {'flour': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 4.29}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 3 flour for 4.29 USD.
Returning bidResponse: {'text': 'How about if I sell you 3 flour for 4.29 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747825213.217, 'bid': {'quantity': {'flour': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 4.29}}}
Bid message from processMessage: {'text': 'How about if I sell you 3 flour for 4.29 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747825213.217, 'bid': {'quantity': {'flour': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 4.29}}}
Sending message: {'text': 'How about if I sell you 3 flour for 4.29 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747825213.217, 'bid': {'quantity': {'flour': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 4.29}}}
Sending message to orchestrator: {'text': 'How about if I sell you 3 flour for 4.29 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747825213.217, 'bid': {'quantity': {'flour': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 4.29}}}
Entering receiveRejection
Remaining Time: 170.660638671875
Info received: {'text': 'How about if I sell you 3 flour for 4.29 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747825213.217, 'bid': {'quantity': {'flour': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 4.29}}, 'rationale': 'Premature response from unaddressed agent'}
Received message: {'text': 'How about if I sell you 3 flour for 4.29 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747825213.217, 'bid': {'quantity': {'flour': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 4.29}}, 'rationale': 'Premature response from unaddressed agent'}
Returning response: {'status': 'Acknowledged', 'message': {'text': 'How about if I sell you 3 flour for 4.29 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747825213.217, 'bid': {'quantity': {'flour': 3}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 4.29}}, 'rationale': 'Premature response from unaddressed agent'}}
127.0.0.1 - - [26/Oct/2020 17:30:25] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 158.75629052734374
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837112}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837112}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837112}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837112}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837112}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837112}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9510185718536377}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837112, 'timeStamp': 1603747837.6610491}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837112, 'timeStamp': 1603747837.6610491}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Other agent accepted/rejected offer. Clearing bidHistory
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837112, 'timeStamp': 1603747837.6610491}}
127.0.0.1 - - [26/Oct/2020 17:30:37] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 157.87973876953126
Info received: {'text': "I confirm that I'm selling you 3 flour for 4.67 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837948.296}
Entering processMessage
Received message: {'text': "I confirm that I'm selling you 3 flour for 4.67 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837948.296}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "I confirm that I'm selling you 3 flour for 4.67 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.7523176193237304}], 'entities': [{'entity': 'sys-number', 'location': [31, 32], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 38], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [43, 47], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [43, 51], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.7523176193237304}], 'entities': [{'entity': 'sys-number', 'location': [31, 32], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 38], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [43, 47], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [43, 51], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "I confirm that I'm selling you 3 flour for 4.67 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837948.296}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.7523176193237304}], 'entities': [{'entity': 'sys-number', 'location': [31, 32], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 38], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [43, 47], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [43, 51], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I confirm that I'm selling you 3 flour for 4.67 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837948.296}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.7523176193237304}], 'entities': [{'entity': 'sys-number', 'location': [31, 32], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 38], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [43, 47], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [43, 51], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I confirm that I'm selling you 3 flour for 4.67 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837948.296}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.7523176193237304}], 'entities': [{'entity': 'sys-number', 'location': [31, 32], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 38], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [43, 47], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [43, 51], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "I confirm that I'm selling you 3 flour for 4.67 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837948.296}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.7523176193237304}]
entities:  [{'entity': 'sys-number', 'location': [31, 32], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 38], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [43, 47], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [43, 51], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [31, 32], 'value': '3', 'confidence': 1, 'metadata': {'numeric_value': 3}, 'interpretation': {'numeric_value': 3, 'subtype': 'integer'}}, {'entity': 'good', 'location': [33, 38], 'value': 'flour', 'confidence': 1}, {'entity': 'sys-number', 'location': [43, 47], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [43, 51], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [43, 47], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [43, 51], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [43, 47], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67}, 'interpretation': {'numeric_value': 4.67, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [43, 51], 'value': '4.67', 'confidence': 1, 'metadata': {'numeric_value': 4.67, 'unit': 'USD'}, 'interpretation': {'numeric_value': 4.67, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 4.67, 'unit': 'USD'}
Received price: {'value': 4.67, 'unit': 'USD'}
Returning offer: {'quantity': {'flour': 3}, 'price': {'value': 4.67, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'flour': 3}, 'price': {'value': 4.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "I confirm that I'm selling you 3 flour for 4.67 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837948.296, 'timeStamp': 1603747838.7850125}}
Received interpretation: {'quantity': {'flour': 3}, 'price': {'value': 4.67, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': "I confirm that I'm selling you 3 flour for 4.67 USD.", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603747837948.296, 'timeStamp': 1603747838.7850125}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
[2020-10-26 17:30:38,786] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 167, in receiveMessage
    bidMessage = processMessage(message)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 734, in processMessage
    bidHistory[addressee].append(interpretation)
AttributeError: 'NoneType' object has no attribute 'append'
127.0.0.1 - - [26/Oct/2020 17:30:38] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
[2020-10-26 17:31:09,698] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 864, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 876, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:31:09] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
[2020-10-26 17:31:23,870] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 864, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 876, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:31:23] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
[2020-10-26 17:32:25,216] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 864, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 876, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 17:32:25] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
Entering endRound
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 17:33:15] "[37mPOST /endRound HTTP/1.1[0m" 200 -









C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent>flask run --port 14008
 * Serving Flask app "agent-py.py"
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.28}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.85}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.59}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.32}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.49}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.24}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.28}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.85}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.59}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.32}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.49}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.24}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 19:53:02] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-26T23:53:07.071Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 19:53:07] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 297.518900390625
Info received: {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9345542907714843}], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.9345542907714843}], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.9345542907714843}], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}, 'addressee': '', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.9345542907714843}], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}, 'addressee': '', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.9345542907714843}], 'entities': [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': '', 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548}, 'addressee': '', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.9345542907714843}]
entities:  [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}]
Found entities: []
entered extractPrice
entities given: []
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
entered extractAddressee
Received entities: [{'entity': 'sys-number', 'location': [7, 8], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [9, 20], 'value': 'milk', 'confidence': 0.91}]
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756391.012931}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756391.012931}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756391.012931}}]}
Human's history: [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756391.012931}}]
Most recent human history: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756391.012931}}
No change to bidHistory. Going to make offer
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756391.012931}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756391.012931}}
BidBlock['type']: BuyRequest
Recent offers: []
Last price: None
Remaining time: 293.06050341796873
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.28}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.85}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.59}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.32}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.49}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.24}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756391.012931}}
no currency units provided
Returning utility: -0.32
Utility received: -0.32
Buyer did not propose price or other agent made an offer. Going to generate price
No history of any SellOffers. Going to propose price
Going to markup price by 2.5361054838785995
Entering quantize
Received quantity: 0.4915537548411518
Received decimals: 2
Returning value: 0.49
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.49 USD.
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.49}}}
Entering receiveMessage
Remaining Time: 293.0196669921875
Info received: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.52 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Entering receiveMessage
Remaining Time: 293.0005703125
Info received: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.49 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8477288722991945}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8477288722991945}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49}, 'interpretation': {'numeric_value': 0.49, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.49', 'confidence': 1, 'metadata': {'numeric_value': 0.49, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.49, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.49, 'unit': 'USD'}
Received price: {'value': 0.49, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.74209}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.74209}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756391.012931}}, {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.74209}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.74209}}
127.0.0.1 - - [26/Oct/2020 19:53:14] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8522926807403566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8522926807403566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8522926807403566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8522926807403566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8522926807403566}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8522926807403566}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52}, 'interpretation': {'numeric_value': 0.52, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.52', 'confidence': 1, 'metadata': {'numeric_value': 0.52, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.52, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.52, 'unit': 'USD'}
Received price: {'value': 0.52, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.795949}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.795949}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.795949}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': None, 'text': 'I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756389548, 'timeStamp': 1603756391.012931}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.74209}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.795949}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.74209}}, {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.795949}}]
Last price: 0.52
Remaining time: 290.27375219726565
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.28}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.85}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.59}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.32}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.21}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.49}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.24}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.52, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.52 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394018.2502, 'timeStamp': 1603756394.795949}}
Currency units match
Returning utility: -0.32
Utility received: -0.32
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.49 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756394042.3735, 'timeStamp': 1603756394.74209}}]
We've made a SellOffer before!
myLastPrice: 0.49
Our offer is better than or equal to this offer
Returning bid: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}
Received confirm: False
bid is a minMarkup
min offer was made by us!
Returning random messge: That's the best I can do. You won't find a better deal out there!
Returning response: My offer for 1 milk stands at 0.49 USD. That's the best I can do. You won't find a better deal out there!
Returning bidResponse: {'text': "My offer for 1 milk stands at 0.49 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396842.2168, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Bid message from processMessage: {'text': "My offer for 1 milk stands at 0.49 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396842.2168, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Sending message: {'text': "My offer for 1 milk stands at 0.49 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396842.2168, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Sending message to orchestrator: {'text': "My offer for 1 milk stands at 0.49 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396842.2168, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Entering receiveRejection
Remaining Time: 290.2244670410156
Info received: {'text': "My offer for 1 milk stands at 0.49 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396842.2168, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}, 'rationale': 'Quantity of agents messages exceeded'}
Received message: {'text': "My offer for 1 milk stands at 0.49 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396842.2168, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}, 'rationale': 'Quantity of agents messages exceeded'}
Returning response: {'status': 'Acknowledged', 'message': {'text': "My offer for 1 milk stands at 0.49 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756396842.2168, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.49, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}, 'rationale': 'Quantity of agents messages exceeded'}}
127.0.0.1 - - [26/Oct/2020 19:53:16] "[37mPOST /receiveRejection HTTP/1.1[0m" 200 -











 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.3680595053086648}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}]}
Entering receiveMessage
Remaining Time: 295.1518994140625
Info received: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.53 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8432246208190919}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.53, 'unit': 'USD'}
Received price: {'value': 0.53, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}]
Last price: 0.53
Remaining time: 292.63871704101564
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.3}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.86}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.96}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.4}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.25}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.25}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.27}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
Currency units match
Returning utility: -0.4
Utility received: -0.4
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 0.3250000000000002
Going to markup price by 2.2593526295597837
Entering quantize
Received quantity: 0.5037410518239135
Received decimals: 2
Returning value: 0.5
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.5 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}}
Entering receiveMessage
Remaining Time: 292.59493041992187
Info received: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.5 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Human's history: [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}]
Most recent human history: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
bidHistory changed, going to do nothing.
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}
127.0.0.1 - - [26/Oct/2020 20:00:36] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8470802307128906}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.5, 'unit': 'USD'}
Received price: {'value': 0.5, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}
127.0.0.1 - - [26/Oct/2020 20:00:36] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 286.34495068359377
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Watson I don't like your offer", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}
Returning Watson response: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}
Received interpretation: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}]}
Entering receiveMessage
Remaining Time: 285.63595727539064
Info received: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}
Entering processMessage
Received message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}
Returning Watson response: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'MinOffer', 'confidence': 0.973372507095337}]
entities:  [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.5, 'unit': 'USD'}
Received price: {'value': 0.5, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
Message from another seller. Need to make an offer!
Message type: MinOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
BidBlock['type']: MinOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}]
Last price: 0.5
Remaining time: 283.01453466796875
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.3}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.86}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.96}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.4}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.25}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.25}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.27}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
Currency units match
Returning utility: 0.09999999999999998
Utility received: 0.09999999999999998
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}]
We've made a SellOffer before!
myLastPrice: 0.5
Our offer is better than or equal to this offer
Returning bid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}
Received confirm: False
bid is a minMarkup
min offer was made by us!
Returning random messge: That's the best I can do. You won't find a better deal out there!
Returning response: My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!
Returning bidResponse: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Bid message from processMessage: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Sending message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Sending message to orchestrator: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Entering receiveMessage
Remaining Time: 282.94302709960937
Info received: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}
This message is from me!
Entering processMessage
Received message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Human's history: [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}]
Most recent human history: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
bidHistory changed, going to do nothing.
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}
127.0.0.1 - - [26/Oct/2020 20:00:45] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}
Returning Watson response: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'MinOffer', 'confidence': 0.973372507095337}]
entities:  [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.5, 'unit': 'USD'}
Received price: {'value': 0.5, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.229246}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.229246}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.229246}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.229246}}
127.0.0.1 - - [26/Oct/2020 20:00:46] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 273.3427680664062
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220, 'timeStamp': 1603756855.8020442}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220, 'timeStamp': 1603756855.8020442}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.229246}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}
Sending bid to translate: {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: Perfect! Just to confirm, I'm giving you
Returning response: Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.
Clearing bidHistory
Returning message: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'bid': {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'bid': {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'bid': {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'bid': {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 272.69284155273436
Info received: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}
This message is from me!
Entering processMessage
Received message: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}]
entities:  [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'timeStamp': 1603756856.6582675}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'timeStamp': 1603756856.6582675}}
Received own message
We accepted/rejected offer. Clearing bidHistory
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'timeStamp': 1603756856.6582675}}
127.0.0.1 - - [26/Oct/2020 20:00:56] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220, 'timeStamp': 1603756855.8020442}}
127.0.0.1 - - [26/Oct/2020 20:01:21] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -




ent server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:14008/ (Press CTRL+C to quit)
Entering setUtility
Info received: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.3}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.86}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.96}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.4}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.25}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.25}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.27}}}, 'name': 'Celia'}
Message sending: {'status': 'Acknowledged', 'utility': {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.3}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.86}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.96}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.4}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.25}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.25}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.27}}}, 'name': 'Celia'}}
127.0.0.1 - - [26/Oct/2020 20:00:23] "[37mPOST /setUtility HTTP/1.1[0m" 200 -
Entering startRound
Info received: {'roundDuration': 300, 'roundNumber': 1, 'timestamp': '2020-10-27T00:00:28.552Z'}
Returning message: {'status': 'Acknowledged'}
127.0.0.1 - - [26/Oct/2020 20:00:28] "[37mPOST /startRound HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 296.74691284179687
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Watson I want 1 cup of milk', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.3680595053086648}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.3680595053086648}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}, {'entity': 'sys-number', 'location': [14, 15], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [16, 27], 'value': 'milk', 'confidence': 0.91}]
Found entities: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
entered extractPrice
entities given: [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1, 'index': 0}]
Returning price: None
Received price: None
Returning offer: {'quantity': {'milk': 1}, 'price': None}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}
Received interpretation: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}]}
Entering receiveMessage
Remaining Time: 295.1518994140625
Info received: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.53 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8432246208190919}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8432246208190919}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 39], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53}, 'interpretation': {'numeric_value': 0.53, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 43], 'value': '0.53', 'confidence': 1, 'metadata': {'numeric_value': 0.53, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.53, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.53, 'unit': 'USD'}
Received price: {'value': 0.53, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
Message from another seller. Need to make an offer!
Message type: SellOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
BidBlock['type']: SellOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}]
Last price: 0.53
Remaining time: 292.63871704101564
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.3}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.86}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.96}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.4}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.25}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.25}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.27}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
Currency units match
Returning utility: -0.4
Utility received: -0.4
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: []
Calcuated last markupRatio: 0.3250000000000002
Going to markup price by 2.2593526295597837
Entering quantize
Received quantity: 0.5037410518239135
Received decimals: 2
Returning value: 0.5
Returning bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}
Received confirm: False
bid is a SellOffer
Returning response: How about if I sell you 1 milk for 0.5 USD.
Returning bidResponse: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}}
Bid message from processMessage: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}}
Sending message: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}}
Sending message to orchestrator: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'bid': {'quantity': {'milk': 1}, 'type': 'SellOffer', 'price': {'unit': 'USD', 'value': 0.5}}}
Entering receiveMessage
Remaining Time: 292.59493041992187
Info received: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}
This message is from me!
Entering processMessage
Received message: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'How about if I sell you 1 milk for 0.5 USD.', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Human's history: [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}]
Most recent human history: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
bidHistory changed, going to do nothing.
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}
127.0.0.1 - - [26/Oct/2020 20:00:36] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}
Returning Watson response: {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'Offer', 'confidence': 0.8470802307128906}], 'entities': [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'Offer', 'confidence': 0.8470802307128906}]
entities:  [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [24, 25], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [26, 30], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [35, 38], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [35, 42], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.5, 'unit': 'USD'}
Received price: {'value': 0.5, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}
127.0.0.1 - - [26/Oct/2020 20:00:36] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 286.34495068359377
Info received: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Watson I don't like your offer", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}
Returning Watson response: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}, 'addressee': 'Watson', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}, 'addressee': 'Watson', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}], 'entities': [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218}, 'addressee': 'Watson', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'RejectOffer', 'confidence': 0.9370527267456055}]
entities:  [{'entity': 'avatarName', 'location': [0, 6], 'value': 'Watson', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}
Received interpretation: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}
Message from buyer not addressed to me. Need to wait for other agent to respond
Added to bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}]}
Entering receiveMessage
Remaining Time: 285.63595727539064
Info received: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}
Entering processMessage
Received message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}
Returning Watson response: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}, 'addressee': 'Human', 'speaker': 'Watson'}
Received message classification: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}, 'addressee': 'Human', 'speaker': 'Watson'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507}, 'addressee': 'Human', 'speaker': 'Watson', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'MinOffer', 'confidence': 0.973372507095337}]
entities:  [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.5, 'unit': 'USD'}
Received price: {'value': 0.5, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
Message from another seller. Need to make an offer!
Message type: MinOffer
Other agent made a sell offer!
Entering generateBid
Received offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
BidBlock: {'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}
BidBlock['type']: BuyRequest
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}
BidBlock['type']: SellOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}
BidBlock['type']: SellOffer
BidBlock: {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}
BidBlock['type']: RejectOffer
BidBlock: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
BidBlock['type']: MinOffer
Recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}]
Last price: 0.5
Remaining time: 283.01453466796875
Entering calculateUtilityAgent
Received utilityInfo: {'currencyUnit': 'USD', 'utility': {'egg': {'type': 'unitcost', 'unit': 'each', 'parameters': {'unitcost': 0.3}}, 'flour': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.86}}, 'sugar': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.96}}, 'milk': {'type': 'unitcost', 'unit': 'cup', 'parameters': {'unitcost': 0.4}}, 'chocolate': {'type': 'unitcost', 'unit': 'ounce', 'parameters': {'unitcost': 0.25}}, 'blueberry': {'type': 'unitcost', 'unit': 'packet', 'parameters': {'unitcost': 0.25}}, 'vanilla': {'type': 'unitcost', 'unit': 'teaspoon', 'parameters': {'unitcost': 0.27}}}, 'name': 'Celia'}
Received bundle: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
Currency units match
Returning utility: 0.09999999999999998
Utility received: 0.09999999999999998
Buyer did not propose price or other agent made an offer. Going to generate price
A SellOffer has been made before
My recent offers: [{'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}]
We've made a SellOffer before!
myLastPrice: 0.5
Our offer is better than or equal to this offer
Returning bid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}
Entering translateBid
Received bid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}
Received confirm: False
bid is a minMarkup
min offer was made by us!
Returning random messge: That's the best I can do. You won't find a better deal out there!
Returning response: My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!
Returning bidResponse: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Bid message from processMessage: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Sending message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Sending message to orchestrator: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'bid': {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinMarkup', 'speaker': 'Celia'}}
Entering receiveMessage
Remaining Time: 282.94302709960937
Info received: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}
This message is from me!
Entering processMessage
Received message: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Human's history: [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}]
Most recent human history: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}
bidHistory changed, going to do nothing.
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}
127.0.0.1 - - [26/Oct/2020 20:00:45] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}
Returning Watson response: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'MinOffer', 'confidence': 0.973372507095337}], 'entities': [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'MinOffer', 'confidence': 0.973372507095337}]
entities:  [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
entered extractOfferFromEntities
Received entityList: [{'entity': 'sys-number', 'location': [13, 14], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [15, 19], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
Found entities: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
entered extractPrice
entities given: [{'entity': 'sys-number', 'location': [30, 33], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}, 'index': 2}, {'entity': 'sys-currency', 'location': [30, 37], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}, 'index': 3}]
Returning price: {'value': 0.5, 'unit': 'USD'}
Received price: {'value': 0.5, 'unit': 'USD'}
Returning offer: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}}
cmd leaving interpretMessage: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.229246}}
Received interpretation: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.229246}}
Received own message
Adding message to bidHistory
bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.229246}}]}
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.229246}}
127.0.0.1 - - [26/Oct/2020 20:00:46] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Entering receiveMessage
Remaining Time: 273.3427680664062
Info received: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}
Entering processMessage
Received message: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': 'Celia I accept your offer', 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}, 'addressee': 'Celia', 'speaker': 'Human'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}, 'addressee': 'Celia', 'speaker': 'Human'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}], 'entities': [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220}, 'addressee': 'Celia', 'speaker': 'Human', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.9507835388183594}]
entities:  [{'entity': 'avatarName', 'location': [0, 5], 'value': 'Celia', 'confidence': 1}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220, 'timeStamp': 1603756855.8020442}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220, 'timeStamp': 1603756855.8020442}}
Message from buyer to me
Buyer accepted offer
Checking bidHistory: {'Human': [{'quantity': {'milk': 1}, 'type': 'BuyRequest', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': 'Watson I want 1 cup of milk', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756831809, 'timeStamp': 1603756833.369165}}, {'quantity': {'milk': 1}, 'price': {'value': 0.53, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.53 USD.', 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756833400.702, 'timeStamp': 1603756833.9132068}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}, {'type': 'RejectOffer', 'metadata': {'speaker': 'Human', 'addressee': 'Watson', 'text': "Watson I don't like your offer", 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842218, 'timeStamp': 1603756842.7913227}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Watson', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756842902.2507, 'timeStamp': 1603756843.5368438}}, {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'MinOffer', 'metadata': {'text': "My offer for 1 milk stands at 0.5 USD. That's the best I can do. You won't find a better deal out there!", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756845580.2925, 'timeStamp': 1603756846.229246}}]}
Our SellOffers: [{'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}]
acceptedBid: {'quantity': {'milk': 1}, 'price': {'value': 0.5, 'unit': 'USD'}, 'type': 'SellOffer', 'metadata': {'text': 'How about if I sell you 1 milk for 0.5 USD.', 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756835949.1887, 'timeStamp': 1603756836.4485526}}
Sending bid to translate: {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Entering translateBid
Received bid: {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}
Received confirm: True
bid is a Accept
Returning random messge: Perfect! Just to confirm, I'm giving you
Returning response: Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.
Clearing bidHistory
Returning message: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'bid': {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Bid message from processMessage: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'bid': {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'bid': {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Sending message to orchestrator: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'bid': {'price': {'value': 0.5, 'unit': 'USD'}, 'quantity': {'milk': 1}, 'type': 'Accept'}}
Entering receiveMessage
Remaining Time: 272.69284155273436
Info received: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}
This message is from me!
Entering processMessage
Received message: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}
Entering classifyMessage
Passsing params into WatsonAssistant: {'assistantId': 'fccf0c80-4760-4ddd-9f89-46319fc5a195', 'input': {'message_type': 'text', 'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'options': {'alternate_intents': True, 'return_context': True}}, 'sessionId': None}
Response from WatsonAssistant [except]: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Entering translateWatsonResponse
Received response: {'output': {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}]}}
Received input_: {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}
Returning Watson response: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}, 'addressee': 'Human', 'speaker': 'Celia'}
Received message classification: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}, 'addressee': 'Human', 'speaker': 'Celia'}
entered interpretMessage
Received watsonResponse: {'intents': [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}], 'entities': [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}], 'generic': [{'response_type': 'text', 'text': "I didn't understand. You can try rephrasing."}], 'input': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742}, 'addressee': 'Human', 'speaker': 'Celia', 'environmentUUID': 'abcdefg'}
intents:  [{'intent': 'AcceptOffer', 'confidence': 0.5658058643341064}]
entities:  [{'entity': 'sys-number', 'location': [41, 42], 'value': '1', 'confidence': 1, 'metadata': {'numeric_value': 1}, 'interpretation': {'numeric_value': 1, 'subtype': 'integer'}}, {'entity': 'good', 'location': [43, 47], 'value': 'milk', 'confidence': 1}, {'entity': 'sys-number', 'location': [52, 55], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5}, 'interpretation': {'numeric_value': 0.5, 'subtype': 'rational'}}, {'entity': 'sys-currency', 'location': [52, 59], 'value': '0.5', 'confidence': 1, 'metadata': {'numeric_value': 0.5, 'unit': 'USD'}, 'interpretation': {'numeric_value': 0.5, 'unit': 'USD'}}]
cmd leaving interpretMessage: {'type': 'AcceptOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'timeStamp': 1603756856.6582675}}
Received interpretation: {'type': 'AcceptOffer', 'metadata': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'timeStamp': 1603756856.6582675}}
Received own message
We accepted/rejected offer. Clearing bidHistory
Bid message from processMessage: None
Returning response: {'status': 'Acknowledged', 'interpretation': {'text': "Perfect! Just to confirm, I'm giving you 1 milk for 0.5 USD.", 'speaker': 'Celia', 'role': 'seller', 'addressee': 'Human', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855804.0742, 'timeStamp': 1603756856.6582675}}
127.0.0.1 - - [26/Oct/2020 20:00:56] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
Returning response: {'status': 'Acknowledged', 'interpretation': {'speaker': 'Human', 'addressee': 'Celia', 'text': 'Celia I accept your offer', 'role': 'buyer', 'environmentUUID': 'abcdefg', 'timestamp': 1603756855220, 'timeStamp': 1603756855.8020442}}
127.0.0.1 - - [26/Oct/2020 20:01:21] "[37mPOST /receiveMessage HTTP/1.1[0m" 200 -
[2020-10-26 20:02:35,962] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\util\retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\packages\six.py", line 734, in reraise
    raise value.with_traceback(tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 171, in receiveMessage
    sendMessage(bidMessage)
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 894, in sendMessage
    return postDataToServiceType(message, 'environment-orchestrator', '/relayMessage')
  File "C:\Users\lingc\OneDrive\Documents\RPI\Fall_2020\CognitiveComputing\Project_1\HumaineAgent\agent-py.py", line 906, in postDataToServiceType
    response = requests.post(url, json=json)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 119, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 498, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
127.0.0.1 - - [26/Oct/2020 20:02:36] "[35m[1mPOST /receiveMessage HTTP/1.1[0m" 500 -
[2020-10-26 20:02:45,608] ERROR in app: Exception on /receiveMessage [POST]
Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\urllib3\connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 1347, in getresponse
    response.begin()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\http\client.py", line 276, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-packages\requests\adapters.py", line 439, in send
    resp = conn.urlopen(
  File "c:\users\lingc\appdata\local\programs\python\python38\lib\site-package